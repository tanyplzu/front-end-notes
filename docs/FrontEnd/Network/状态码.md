---
sidebarDepth: 0
---

# 状态码

[[toc]]

- 1××：提示信息，表示目前是协议处理的中间状态，还需要后续的操作；
- 2××：成功，报文已经收到并被正确处理；
- 3××：重定向，资源位置发生变动，需要客户端重新发送请求；
- 4××：客户端错误，请求报文有误，服务器无法处理；
- 5××：服务器错误，服务器在处理请求时内部发生了错误。

## 1XX

含义：服务器正在处理请求

## 2XX

### 204 No Content

与“200 OK”基本相同，但响应头后没有 body 数据，而且 Content-Length=0。

使用场景：

### 206 Partial Content

是 HTTP 分块下载或断点续传的基础，在客户端发送“范围请求”、要求获取资源的部分数据时出现，它与 200 一样，也是服务器成功处理了请求，但 body 里的数据不是资源的全部，而是其中的一部分。

状态码 206 通常还会伴随着头字段“Content-Range”，表示响应报文里 body 数据的具体范围，供客户端确认，例如“Content-Range: bytes 0-99/2000”，意思是此次获取的是总计 2000 个字节的前 100 个字节。

## 3XX

### 301 Moved Permanently

俗称“永久重定向”，含义是此次请求的资源已经不存在了，需要改用新的 URI 再次访问。

301 和 302 都会在响应头里使用字段 Location 指明后续要跳转的 URI，最终的效果很相似，浏览器都会重定向到新的 URI。两者的根本区别在于语义，一个是“永久”，一个是“临时”，所以在场景、用法上差距很大。

比如，你的网站升级到了 HTTPS，原来的 HTTP 不打算用了，这就是“永久”的，所以要配置 301 跳转，把所有的 HTTP 流量都切换到 HTTPS。

再比如，今天夜里网站后台要系统维护，服务暂时不可用，这就属于“临时”的，可以配置成 302 跳转，把流量临时切换到一个静态通知页面，浏览器看到这个 302 就知道这只是暂时的情况，不会做缓存优化，第二天还会访问原来的地址。

### 303 See Other

通常作为 PUT 或 POST 操作的返回结果，它表示重定向链接指向的不是新上传的资源，而是另外一个页面，比如消息确认页面或上传进度页面。而请求重定向页面的方法要总是使用 GET。

### 304 Not Modified(未修改)

它用于 If-Modified-Since 等条件请求，表示资源未修改，用于缓存控制。它不具有通常的跳转含义，但可以理解成“重定向已到缓存的文件”（即“缓存重定向”）。

### 307 Temporary Redirect(临时重定向)

状态码 307 与 302 之间的唯一区别在于，当发送重定向请求的时候，307 状态码可以确保请求方法和消息主体不会发生变化。如果使用 302 响应状态码，一些旧客户端会错误地将请求方法转换为 GET：也就是说，在 Web 中，如果使用了 GET 以外的请求方法，且返回了 302 状态码，则重定向后的请求方法是不可预测的；但如果使用 307 状态码，之后的请求方法就是可预测的。对于 GET 请求来说，两种情况没有区别。

### 308 Permanent Redirect（永久重定向）

## 4XX

### 400 Bad Request（坏请求）

含义：请求出现语法错误。该状态码表示请求报文中存在语法错误。当错误发生时，需要修改请求的内容后再次发送请求。另外，浏览器会像 200 OK 一样对待该状态码。出现原因：

- 语义有误，当前请求无法被服务器理解。除非进行修改，否则客户端不应该重复提交这个请求。
- 请求参数有误。

### 401 Unauthorized（未授权）

代表客户端错误，指的是由于缺乏目标资源要求的身份验证凭证，发送的请求未得到满足。

这个状态码会与 WWW-Authenticate 首部一起发送，其中包含有如何进行验证的信息。

```http
HTTP/1.1 401 Unauthorized
Date: Wed, 21 Oct 2015 07:28:00 GMT
WWW-Authenticate: Basic realm="Access to staging site"
```

### 403 Forbidden （禁止）

实际上不是客户端的请求出错，而是表示服务器禁止访问资源。原因可能多种多样，例如信息敏感、法律禁止等。

### 404 Not Found（未找到）

无法找到指定位置的资源。这也是一个常用的应答。 请求失败，请求所希望得到的资源未被在服务器上发现。没有信息能够告诉用户这个状况到底是暂时的还是永久的。假如服务器知道情况的话，应当使用 410 状态码来告知旧资源因为某些内部的配置机制问题，已经永久的不可用，而且没有任何可以跳转的地址。 404 这个状态码被广泛应用于当服务器不想揭示到底为何请求被拒绝或者没有其他适合的响应可用的情况下。出现这个错误的最有可能的原因是服务器端没有这个页面。

使用场景： 服务器找不到资源时，或者服务器拒绝请求又不想说明理由时。

### 405 Method Not Allowed（不允许使用的方法）

不允许使用某些方法操作资源，例如不允许 POST 只能 GET。

### 408 Request Timeout（请求超时）

在服务器许可的等待时间内，客户端一直没有发出任何请求。客户端可以在以后重复同一请求。（HTTP 1.1 新） 遇到 408 意味着你的请求发送到该网站花的时间比该网站的服务器准备等待的时间要长，即链接超时。408 错误往往难以解决，通常涉及系统工作量或系统操作中的一次性变化。

出现原因： 如果用户持续看到 408 错误，管理员首先要考虑到 Web 服务器的工作量，特别是在产生 408 错误的时间段，另外网络流量激增也可能导致用户无法访问网页从而出现该错误。

### 413 Request Entity Too Large

请求报文里的 body 太大。

### 414 Request-URI Too Long

请求行里的 URI 太大。

### 429 Too Many Requests

客户端发送了太多的请求，通常是由于服务器的限连策略。

### 431 Request Header Fields Too Large

请求头某个字段或总体太大。

## 5XX

### 500 Internal Server Error（内部资源出错）

注意：这种情况下通常不应该把服务器内部的详细信息，例如出错的函数调用栈告诉外界。虽然不利于调试，但能够防止黑客的窥探或者分析。

### 502 Bad Gateway(网关错误)

502 错误通常不是客户端能够修复的，而是需要由途径的 Web 服务器或者代理服务器对其进行修复。举个例子：启动 nginx，不启动 php-fpm， 这时候 nginx 服务器就会返回 502。原因：nginx 无法连接 php-fpm，在达到 nginx 最大的超时时间的时候，nginx 还没有获取到响应就会返回 502。

### 503 Service Unavailable(服务不可用)

服务器由于维护或者负载过重未能应答。服务器返回 503 时可以提供一个 Retry-After 头。 由于临时的服务器维护或者过载，服务器当前无法处理请求。这个状况是临时的，并且将在一段时间以后恢复。如果能够预计延迟时间，那么响应中可以包含一个 Retry-After 头用以标明这个延迟时间。如果没有给出这个 Retry-After 信息，那么客户端应当以处理 500 响应的方式处理它。

注意：503 状态码的存在并不意味着服务器在过载的时候必须使用它。某些服务器只不过是希望拒绝客户端的连接。

解决方案： 例如，Servlet 可能在数据库连接池已满的情况下返回 503。在服务器 503 错误出现了之后，大家不必担心的， 服务器或许就是正在维护或者暂停了，你可以联系一下服务器空间商。还有的时候 cpu 占用的频率大导致的。

### 504 Gateway Timeout（网关超时）

作为代理或网关的服务器使用，表示不能及时地从远程服务器获得应答。（HTTP 1.1 新）作为网关或者代理工作的服务器尝试执行请求时，未能及时从上游服务器（URI 标识出的服务器，例如 HTTP、FTP、LDAP）或者辅助服务器（例如 DNS）收到响应。

注意：某些代理服务器在 DNS 查询超时时会返回 400 或者 500 错误出现原因：与状态码 408 类似， 但是响应来自网关或代理，此网关或代理在等待另一台服务器的响应时出现了超时。一般是 nginx 做为反向代理服务器的时候，所连接的应用服务器譬如 tomcat 无响应导致的。 504 和 502 的差别就是一个没有启动，一个是超时，以 nginx + tomcat 为例：

- 502 tomcat 没有启动起来
- 504 tomcat 响应超时

## 资料

- [HTTP response status codes](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status/200)
- [四张图看懂 HTTP 状态码](https://blog.csdn.net/liuxinghao/article/details/50477415)
