---
title: "网络与安全"
sidebarDepth: 2
---

## 目录
[[toc]]

## 浏览器网络

### TCP

### UDP
属于通信传输流中的传输层，UDP是面向无连接的，传输双方没有确认机制，也就是说你要传就传吧，没有HTTP那样需要事先三从握手。
缺点是不能保证数据传输的可靠性；优点是报文头信息少开销小，支持一对多、多对多、多对一的传输方式，传输实时性强。常用于直播以及游戏。


### HTTP1

### http1.0和http1.1的区别？
http1.1加如了持久连接。
加入了更多的请求头、响应头(缓存方面的)。
新增了一些错误状态码、如409(请求的资源和资源当前状态发生冲突)、410(服务器上的某个资源被永久性的删除)。



### HTTP2



### HTTP3


### http和https的区别？
url开头不一致是最明显的区分；其次http没有https安全，http没有经过SSL/TLS加密、身份验证；还有默认的端口不一样，http是80、https是443，https需要证书，https是防止中间人攻击方式的一种。

### 为什么https更安全？
公钥加密双方都需要事先知道一个都知道加密方式的密钥，优点是加密速度快，缺点是过程中可能会被窃取，安全性没有非对称加密高。
非对称加密会加入公钥和私钥，客户端使用第三方证书去服务端获取公钥，然后用获取到的公钥把共享密钥进行加密发送给服务端，服务端使用私钥解密出共享密钥，服务端用获取到的共享密钥进行消息的加密，客户端用用共享密钥进行解密。


### 常见的响应状态码有哪些？
大致可以分为2开头表示成功、3开头表示重定向、4开头客户端错误、5开头服务器错误。
204：如当浏览器发出请求处理后，返回204响应，表示客户端显示的页面不发生更新。
206：客户端只要想要响应内容中的一部分，服务端成功执行了这次响应。响应报文中的Content-Range则指定了哪部分的内容。
301：永久重定向，表示请求的资源已被分配到了新的URI，以后使用新的吧
302：临时重定向，表示请求的资源已被分配到了新的URI，现在使用新的吧
303：临时重定向，表示请求的资源已被分配到了新的URI，请使用get方法获取资源。
304：服务端找不到根据客户端发送附带条件的请求。(附带条件指get请求报文中包含If-Match、If-Modified-Since、If-None-Match、If-Range、If-Unmodified-Since中的一个)
400：请求报文存在语法错误。
403：请求资源被服务器拒绝。
503：表明服务器暂时处于超负载或正在停机维护，无法处理请求。

### get和post的区别？
get回退不会重新发起请求，post会；
get默认会被浏览器主动缓存，post不会；
get只能进行url编码，post支持多种编码方式；
get的请求参数会被拼接到url后面，post放在request-body中；
get产生一个tcp数据包，post会产生两个tcp包；
get主要是应用为获取资源，post主要是应用于传输或修改资源。

### 什么是持久连接以及管线化？
持久连接：在HTTP/1.1之前的时代，每一次HTTP请求就需要先TCP建立三次握手，传输完毕后就断开连接，会增加很多的通信开销。HTTP/1.1增加了持久连接，也就是说在一次TCP连接里面可以发送多次HTTP请求，只要任意一端没有明确提出断开连接，则保持TCP的连接状态，也就是响应头里面的Connection:keep-alive。
管线化：在持久连接里处理HTTP的方式是，发送响应完成后才能发起下一个请求，而管线化解决的问题是可以一次发起多个HTTP请求，且可以同时返回多次响应结果。

### 为什么发起HTTP请求前需要TCP三次握手？
为了让客户端和服务端都能确定彼此发起和响应的能力是否靠谱。
客户端首先发送证明客户端有发送的能力，服务端接受后返回证明服务端有响应和发送的能力，但这个时候还不能知道客户端的响应能力，所以客户端再响应之后，表明彼此连接的通道是顺畅的，然后HTTP请求就可以传输数据了。

### 为什么关闭HTTP请求前需要TCP四次挥手？
关闭连接是双向的，客户端和服务器都可以提出，四次挥手是为了不让关闭太仓促，保证可靠性。
如客户端首先会告知服务器申请关闭连接，服务器收到后告诉客户端收到了，不过我还没有准备好，让客户端等等。服务端数据发送数据完毕后，再次告诉客户端，我准备关闭连接了。客户端收到后怕网络不好，服务器不知道要关闭，所以第四次发送信息确认，服务器收到后断开连接，客户端也断开连接。

### HTTP请求报文和响应报文里分别有什么？
报文的结构大致是两部分，报文首部，一个空行，和报文主体，报文主体不一定非要有。
请求报文：包括了请求行，里面包括请求的方法，协议版本；各种首部的字段，例如服务器域名、客户端信息、缓存信息、压缩传输的方式等。
响应报文：包括了状态行，协议版本，响应的状态码；各种首部的字段，如ETag、日期、内容类型等，以及响应的报文主体。



## 浏览器安全

### 什么是XSS？
就是攻击者通过页面注入可执行的代码，例如评论的留言里。XSS的类型分为两种：持久型和非持久型。

- 持久性：将攻击的代码通过服务端写入到数据库中，例如通过评论提交的评论里面是一段脚本，如果没做好防范就会提交到数据库里，可能导致其他用户会执行这段代码，会到攻击。
- 非持久性：一般是通过修改URL参数的方式加入攻击代码，从而诱导用户访问链接从而进行攻击。

### 如何防范XSS？
转义字符：将用户输入的内容，如引号、尖括号、斜杠进行转义；采用白名单过滤标签和标签属性，例如过滤script标签；使用CSP告诉浏览器限制外部资源可以加载和执行，开启CSP有两种方式：1. 设置HTTP-Header中的Content-sesurity-Policy。 2. 设置`<meta>`标签的方式`<meta http-equiv="Content-Security-Policy">`。

### 什么是CSRF？
中文的意思是跨站请求伪造。原理是攻击者构造出一个后端请求地址，诱导用户去点击发起请求。如果是登陆状态，服务端就会以为是用户在操作，从而进行相应的逻辑。

### 如何防范CSRF？


不让get请求对数据进行修改；不让第三方网站访问到用户的cookie，设置cookie的SameSite属性，不让cookie随跨域请求携带；组织第三方网站请求接口，验证Referer；Token验证，登陆后服务器下发一个随机token，之后的请求带上。

### 什么是点击劫持？
是一种视觉欺骗的攻击手段，攻击者将需要攻击的网站通过iframe嵌入的方式嵌入到自己的网页里，将iframe设置为透明，在页面中透出一个按钮诱导用户点击。

### 如何防范点击劫持？
现代浏览器设置HTTP响应头X-FRAME-OPTIONS，这个响应头就是为了防御点击劫持的；远古浏览器使用js防御，当通过iframe的方式加载页面时，让攻击者网站不显示内容。

### 什么是中间人攻击？
就是在攻击者在服务端和客户端建立了连接，并让对方认为连接是安全的，攻击者不仅能获得双方的通信信息，还能修改通信信息。

### 如果防范中间人攻击？
不要使用公共wifi；只使用https协议，并关闭http的访问。
