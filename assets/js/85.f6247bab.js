(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{427:function(v,_,s){"use strict";s.r(_);var t=s(6),a=Object(t.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"xss"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#xss"}},[v._v("#")]),v._v(" XSS")]),v._v(" "),_("p"),_("div",{staticClass:"table-of-contents"},[_("ul",[_("li",[_("a",{attrs:{href:"#什么是-xss-跨站脚本攻击"}},[v._v("什么是 XSS (跨站脚本攻击)")])]),_("li",[_("a",{attrs:{href:"#xss-分类"}},[v._v("XSS 分类")]),_("ul",[_("li",[_("a",{attrs:{href:"#存储型-xss"}},[v._v("存储型 XSS")])]),_("li",[_("a",{attrs:{href:"#反射型-xss"}},[v._v("反射型 XSS")])]),_("li",[_("a",{attrs:{href:"#dom-型-xss"}},[v._v("DOM 型 XSS")])])])]),_("li",[_("a",{attrs:{href:"#如何防范-xss"}},[v._v("如何防范 XSS")])])])]),_("p"),v._v(" "),_("h2",{attrs:{id:"什么是-xss-跨站脚本攻击"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#什么是-xss-跨站脚本攻击"}},[v._v("#")]),v._v(" 什么是 XSS (跨站脚本攻击)")]),v._v(" "),_("p",[v._v("就是攻击者通过页面注入可执行的代码，例如评论的留言里。XSS 的类型分为两种：持久型和非持久型。")]),v._v(" "),_("ul",[_("li",[v._v("持久性：将攻击的代码通过服务端写入到数据库中，例如通过评论提交的评论里面是一段脚本，如果没做好防范就会提交到数据库里，可能导致其他用户会执行这段代码，会到攻击。")]),v._v(" "),_("li",[v._v("非持久性：一般是通过修改 URL 参数的方式加入攻击代码，从而诱导用户访问链接从而进行攻击。")])]),v._v(" "),_("h2",{attrs:{id:"xss-分类"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#xss-分类"}},[v._v("#")]),v._v(" XSS 分类")]),v._v(" "),_("h3",{attrs:{id:"存储型-xss"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#存储型-xss"}},[v._v("#")]),v._v(" 存储型 XSS")]),v._v(" "),_("p",[v._v("存储型 XSS 的攻击步骤：")]),v._v(" "),_("ol",[_("li",[v._v("攻击者将恶意代码提交到目标网站的数据库中。")]),v._v(" "),_("li",[v._v("用户打开目标网站时，网站服务端将恶意代码从数据库取出，拼接在 HTML 中返回给浏览器。")]),v._v(" "),_("li",[v._v("用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行。")]),v._v(" "),_("li",[v._v("恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作。")])]),v._v(" "),_("p",[v._v("这种攻击常见于带有用户保存数据的网站功能，如论坛发帖、商品评论、用户私信等。")]),v._v(" "),_("h3",{attrs:{id:"反射型-xss"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#反射型-xss"}},[v._v("#")]),v._v(" 反射型 XSS")]),v._v(" "),_("p",[v._v("反射型 XSS 的攻击步骤：")]),v._v(" "),_("ol",[_("li",[v._v("攻击者构造出特殊的 URL，其中包含恶意代码。")]),v._v(" "),_("li",[v._v("用户打开带有恶意代码的 URL 时，网站服务端将恶意代码从 URL 中取出，拼接在 HTML 中返回给浏览器。")]),v._v(" "),_("li",[v._v("用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行。")]),v._v(" "),_("li",[v._v("恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作。")])]),v._v(" "),_("ul",[_("li",[v._v("反射型 XSS 跟存储型 XSS 的区别是：存储型 XSS 的恶意代码存在数据库里，反射型 XSS 的恶意代码存在 URL 里。")]),v._v(" "),_("li",[v._v("反射型 XSS 漏洞常见于通过 URL 传递参数的功能，如网站搜索、跳转等。")]),v._v(" "),_("li",[v._v("由于需要用户主动打开恶意的 URL 才能生效，攻击者往往会结合多种手段诱导用户点击。")]),v._v(" "),_("li",[v._v("POST 的内容也可以触发反射型 XSS，只不过其触发条件比较苛刻（需要构造表单提交页面，并引导用户点击），所以非常少见。")])]),v._v(" "),_("h3",{attrs:{id:"dom-型-xss"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#dom-型-xss"}},[v._v("#")]),v._v(" DOM 型 XSS")]),v._v(" "),_("p",[v._v("DOM 型 XSS 的攻击步骤：")]),v._v(" "),_("ol",[_("li",[v._v("攻击者构造出特殊的 URL，其中包含恶意代码。")]),v._v(" "),_("li",[v._v("用户打开带有恶意代码的 URL。")]),v._v(" "),_("li",[v._v("用户浏览器接收到响应后解析执行，前端 JavaScript 取出 URL 中的恶意代码并执行。")]),v._v(" "),_("li",[v._v("恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作。")])]),v._v(" "),_("p",[v._v("DOM 型 XSS 跟前两种 XSS 的区别：DOM 型 XSS 攻击中，取出和执行恶意代码由浏览器端完成，属于前端 JavaScript 自身的安全漏洞，而其他两种 XSS 都属于服务端的安全漏洞。")]),v._v(" "),_("h2",{attrs:{id:"如何防范-xss"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#如何防范-xss"}},[v._v("#")]),v._v(" 如何防范 XSS")]),v._v(" "),_("ul",[_("li",[v._v("转义字符：将用户输入的内容，如引号、尖括号、斜杠进行转义；")]),v._v(" "),_("li",[v._v("采用白名单过滤标签和标签属性，例如过滤 script 标签；")]),v._v(" "),_("li",[v._v("使用 CSP 告诉浏览器限制外部资源可以加载和执行;")]),v._v(" "),_("li",[v._v("使用 HttpOnly 属性。很多 XSS 攻击都是来盗用 Cookie 的，因此还可以通过使用 HttpOnly 属性来保护我们 Cookie 的安全。")])]),v._v(" "),_("p",[v._v("开启 CSP 有两种方式：")]),v._v(" "),_("ol",[_("li",[v._v("后端设置 http-header 中的 Content-sesurity-Policy。")]),v._v(" "),_("li",[v._v("设置"),_("code",[v._v("<meta>")]),v._v("标签的方式"),_("code",[v._v('<meta http-equiv="Content-Security-Policy">')]),v._v("。")])]),v._v(" "),_("p",[v._v("CSP 的功能：")]),v._v(" "),_("ul",[_("li",[v._v("限制加载其他域下的资源文件，这样即使黑客插入了一个 JavaScript 文件，这个 JavaScript 文件也是无法被加载的；")]),v._v(" "),_("li",[v._v("禁止向第三方域提交数据，这样用户数据也不会外泄；")]),v._v(" "),_("li",[v._v("禁止执行内联脚本和未授权的脚本；")]),v._v(" "),_("li",[v._v("还提供了上报机制，这样可以帮助我们尽快发现有哪些 XSS 攻击，以便尽快修复问题。")])]),v._v(" "),_("p",[v._v("React 中：")]),v._v(" "),_("p",[v._v("React DOM 在渲染所有输入内容之前，默认会进行转义。它可以确保在你的应用中，永远不会注入那些并非自己明确编写的内容。所有的内容在渲染之前都被转换成了字符串。这样可以有效地防止 XSS（cross-site-scripting, 跨站脚本）攻击。")])])}),[],!1,null,null,null);_.default=a.exports}}]);