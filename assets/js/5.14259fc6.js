(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{399:function(t,s,a){t.exports=a.p+"assets/img/deployWebApp001.f0412241.png"},400:function(t,s,a){t.exports=a.p+"assets/img/deployWebApp002.5797f0f5.jpg"},401:function(t,s){t.exports="data:image/png;base64,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"},402:function(t,s,a){t.exports=a.p+"assets/img/deployWebApp003.ce67899d.png"},403:function(t,s,a){t.exports=a.p+"assets/img/deployWebApp005.f2de8a08.png"},532:function(t,s,a){"use strict";a.r(s);var n=a(15),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"部署一个静态网站"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#部署一个静态网站"}},[t._v("#")]),t._v(" 部署一个静态网站")]),t._v(" "),n("p",[t._v("在阿里云 ecs 部署一点前端静态服务器。使用的环境为 linux、nginx、node 以及 pm2。")]),t._v(" "),n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#nginx"}},[t._v("nginx")])]),n("li",[n("a",{attrs:{href:"#域名解析"}},[t._v("域名解析")])]),n("li",[n("a",{attrs:{href:"#配置-ssl"}},[t._v("配置 SSL")])]),n("li",[n("a",{attrs:{href:"#node-服务器"}},[t._v("node 服务器")])]),n("li",[n("a",{attrs:{href:"#ssh-免密登录"}},[t._v("ssh 免密登录")])]),n("li",[n("a",{attrs:{href:"#pm2-部署"}},[t._v("pm2 部署")])]),n("li",[n("a",{attrs:{href:"#http-2"}},[t._v("http 2")])]),n("li",[n("a",{attrs:{href:"#部署问过程遇到的问题"}},[t._v("部署问过程遇到的问题")])])])]),n("p"),t._v(" "),n("h2",{attrs:{id:"nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[t._v("#")]),t._v(" nginx")]),t._v(" "),n("p",[t._v("linux 下安装")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("yum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" nginx-1.16.1\n")])])]),n("p",[t._v("相关命令")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("nginx -v\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动")]),t._v("\nnginx\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看nginx都安装到了哪些目录")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rpm")]),t._v(" -ql nginx\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进入配置文件，不同的部署方式目录不同")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /etc/nginx/conf.d\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 关闭")]),t._v("\nnginx -s stop\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重新启动")]),t._v("\nnginx -s reload\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询80端口占用")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("netstat")]),t._v(" -ntpl "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 杀死所有nginx进程")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("killall")]),t._v(" nginx\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看nginx进程")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" aux "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" nginx\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 检查nginx配置")]),t._v("\nnginx -t\n")])])]),n("p",[t._v("进入"),n("code",[t._v("/etc/nginx/conf.d")]),t._v("目录后")]),t._v(" "),n("p",[t._v("新建一个问价夹，创建"),n("code",[t._v("blog-xxx-com-3000.conf")]),t._v("文件，为了方便管理，文件名建议和域名一致。")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建文件")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("touch")]),t._v(" blog-xxx-com-3000\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 打开文件编辑")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" blog-xxx-com-3000\n")])])]),n("p",[t._v("在创建好的文件中写入内容。")]),t._v(" "),n("div",{staticClass:"language-conf extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("upstream fe_blog {\n  server  127.0.0.1:3000;\n}\nserver {\n  listen 80;\n  server_name blog.xxx.com;\n  return 301 https://$host$request_uri;\n}\nserver {\n  #SSL 访问端口号为 443\n  listen 443 ssl;\n  #填写绑定证书的域名\n  server_name blog.xxx.com;\n  #证书文件名称 /www/ssl/为证书路劲\n  ssl_certificate /www/ssl/1_blog.xxx.com_bundle.crt;\n  #私钥文件名称\n  ssl_certificate_key /www/ssl/2_blog.xxx.com.key;\n  ssl_session_timeout 5m;\n  #请按照以下协议配置\n  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n  #请按照以下套件配置，配置加密套件，写法遵循 openssl 标准。\n  ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;\n  ssl_prefer_server_ciphers on;\n  location / {\n    proxy_pass          http://fe_blog;\n    proxy_set_header    host             $host;\n    proxy_set_header    X-Real-IP        $remote_addr;\n    proxy_set_header    X-Forwarded-For  $proxy_add_x_forwarded_for;\n    proxy_set_header    X-NginX-Proxy    true;\n  }\n}\n")])])]),n("p",[t._v("写入完成后，按键盘"),n("code",[t._v("esc")]),t._v("退出，按 "),n("code",[t._v("shift + :")]),t._v(" 和 "),n("code",[t._v("wq!")]),t._v("保存退出。然后查看配置并检查配置是否有错误。")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" blog-xxx-com-3000\nnginx -t\n")])])]),n("p",[t._v("以上配置将 nginx 作为代理服务器使用，将 3000 端口下的 http 服务反向代理到"),n("code",[t._v("https://blog.xxx.com")]),t._v("域名下。如果将静态直接部署到 nginx 下，使用以下配置：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("server "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    listen "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    # gzip config\n    gzip on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    gzip_min_length "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("k"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    gzip_comp_level "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    gzip_types text"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("plain application"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("javascript application"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("javascript text"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("css application"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xml text"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("javascript application"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("httpd"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("php image"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("jpeg image"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gif image"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("png"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    gzip_vary on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    gzip_disable "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MSIE [1-6]\\."')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    root "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("share"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        # 用于配合 browserHistory使用\n        try_files $uri $uri"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        # 如果有资源，建议使用 https "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" http2，配合按需加载可以获得更好的体验\n        # rewrite "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$ https"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("preview"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pro"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ant"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("design"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("$"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" permanent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("api "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        proxy_pass https"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ant"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("design"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("pro"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("netlify"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        proxy_set_header   "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("X")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Forwarded"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Proto $scheme"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        proxy_set_header   "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("X")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Real"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IP")]),t._v("         $remote_addr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nserver "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  # 如果有资源，建议使用 https "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" http2，配合按需加载可以获得更好的体验\n  listen "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("443")]),t._v(" ssl http2 default_server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  # 证书的公私钥\n  ssl_certificate "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("path"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("to"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("crt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  ssl_certificate_key "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("path"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("to"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        # 用于配合 browserHistory使用\n        try_files $uri $uri"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("api "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      proxy_pass https"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ant"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("design"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("pro"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("netlify"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      proxy_set_header   "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("X")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Forwarded"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Proto $scheme"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      proxy_set_header   Host              $http_host"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      proxy_set_header   "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("X")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Real"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IP")]),t._v("         $remote_addr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("以上是"),n("a",{attrs:{href:"https://pro.ant.design/zh-CN/docs/deploy/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ant design pro 的部署"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("h2",{attrs:{id:"域名解析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#域名解析"}},[t._v("#")]),t._v(" 域名解析")]),t._v(" "),n("p",[t._v("购买域名，配置 dns 服务器地址。如果购买平台和解析平台不是一个平台，需要设置 dns 服务器。")]),t._v(" "),n("p",[t._v("个人一般在"),n("a",{attrs:{href:"https://www.dnspod.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("dnspod"),n("OutboundLink")],1),t._v("上做域名解析。")]),t._v(" "),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("algernon.dnspod.net\ncassiopeia.dnspod.net\n")])])]),n("p",[t._v("添加记录")]),t._v(" "),n("p",[n("img",{attrs:{src:a(399),alt:"添加记录"}})]),t._v(" "),n("h2",{attrs:{id:"配置-ssl"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置-ssl"}},[t._v("#")]),t._v(" 配置 SSL")]),t._v(" "),n("p",[t._v("nginx 中配置 https 时，需要配置 "),n("code",[t._v("ssl_certificate")]),t._v(" 和 "),n("code",[t._v("ssl_certificate_key")]),t._v(" 字段，这个两个字段是 SSL 的两个证书。SSL 证书在域名解析时需要单独购买。对于个人网站可以使用免费的 SSL 证，域名解析时按提示配置 SSL 证书。配置后在证书管理页面下载 ssl 证书即可，里面有 "),n("code",[t._v("Apache")]),t._v("、"),n("code",[t._v("IIS")]),t._v("、"),n("code",[t._v("Nginx")]),t._v("、"),n("code",[t._v("Tomcat")]),t._v(" 等服务器配置时需要的证书。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(400),alt:"ssl证书"}})]),t._v(" "),n("p",[t._v("下载证书后，需要将证书上传到固定 nginx 中固定的目录下。个人一般存放在自建的"),n("code",[t._v("www/ssl")]),t._v("目录下。")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 给nginx目录下上传文件")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scp")]),t._v(" 1_blog.xxx.com_bundle.crt root@xx.xx.xx.xxx:/www/ssl/\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("scp")]),t._v(" 2_blog.xxx.com.key root@xx.xx.xx.xxx:/www/ssl/\n")])])]),n("h2",{attrs:{id:"node-服务器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#node-服务器"}},[t._v("#")]),t._v(" node 服务器")]),t._v(" "),n("p",[t._v("Linux 上安装 node，先安装"),n("a",{attrs:{href:"https://github.com/nvm-sh/nvm",target:"_blank",rel:"noopener noreferrer"}},[t._v("nvm"),n("OutboundLink")],1)]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("curl "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("o"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" https"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("raw"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("githubusercontent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nvm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("sh"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nvm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("v0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("39.0")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("install"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sh "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" bash\nwget "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("qO"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" https"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("raw"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("githubusercontent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nvm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("sh"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nvm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("v0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("39.0")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("install"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sh "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" bash\n")])])]),n("p",[t._v("静态网站服务器可以使用："),n("code",[t._v("pushstate-server")]),t._v(",新建 "),n("code",[t._v("server.js")]),t._v(" 文件夹。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pushstate-server'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nserver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  port"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3001")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  directory"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./dist'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("也可以使用"),n("code",[t._v("express")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" express "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'express'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" compression "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'compression'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 端口可以自己定义")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" port "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PORT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3002")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("express")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开启 gzip 压缩")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("compression")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("express"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("static")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./dist'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" app"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("port"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Listening at '")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" port "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\n'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("接下来配置 pm2 自动化部署，首先配置 ssh 远程服务器免密登录。")]),t._v(" "),n("h2",{attrs:{id:"ssh-免密登录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ssh-免密登录"}},[t._v("#")]),t._v(" ssh 免密登录")]),t._v(" "),n("blockquote",[n("p",[t._v("SSH 是一种网络协议，用于计算机之间的加密登录。")])]),t._v(" "),n("p",[t._v("查看本地 "),n("code",[t._v("~/.ssh")]),t._v(" 路径下是否有 ssh key，没有则生成 ssh key。")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("ssh-keygen -t rsa -C "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxxxx@xxxxx.com"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" id_rsa.pub\n")])])]),n("p",[n("code",[t._v("id_rsa.pub")]),t._v(" 文件里面的内容，就是需要的公钥内容。")]),t._v(" "),n("p",[t._v("拿到它之后，进入阿里云服务器，同样先看看本地是否有设置好公钥，如果没有，按刚才的步骤再配置一次。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(401),alt:"ssh"}})]),t._v(" "),n("p",[t._v("配置完成后，把之前用户本地生成的 "),n("code",[t._v("id_rsa.pub")]),t._v(" 内容放入 "),n("code",[t._v("authorized_keys")]),t._v(" 中，在本地命令行工具执行 "),n("code",[t._v("ssh root@服务器 IP")]),t._v("，便能直接免密登录了。")]),t._v(" "),n("h2",{attrs:{id:"pm2-部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pm2-部署"}},[t._v("#")]),t._v(" pm2 部署")]),t._v(" "),n("p",[t._v("部署流程图")]),t._v(" "),n("p",[n("img",{attrs:{src:a(402),alt:"部署流程图"}})]),t._v(" "),n("p",[t._v("使用 ssh 免密登录远程服务器。")]),t._v(" "),n("p",[t._v("在根目录下新建文件"),n("code",[t._v("ecosystem.config.js")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  apps"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'blog'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 项目名")]),t._v("\n      script"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'server.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 上文创建的node服务器")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  deploy"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    production"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      user"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 阿里云用户名")]),t._v("\n      host"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'47.97.10.000'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 阿里云地址")]),t._v("\n      ref"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'origin/master'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      repo"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git@github.com:xxxx/xxxxx.git'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// git仓库地址")]),t._v("\n      path"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/www/website/blog'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 阿里云上的路径 www 是个人新建的路径")]),t._v("\n      ssh_options"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'StrictHostKeyChecking=no'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'post-deploy'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git reset --hard && git checkout master && git pull && npm i --production=false && npm run build && pm2 startOrReload ecosystem.config.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      env"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("由于服务器并没有 blog 这个项目，所以我们需要初始化一下项目")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("pm2 deploy ecosystem.config.js production setup\n")])])]),n("p",[t._v("当服务器上有该路径地址后，开始自动化执行整个流程。每次本地使用以下命令即可完成自动化部署。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("pm2 deploy production\n")])])]),n("p",[t._v("部署成功后：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(403),alt:"pm2"}})]),t._v(" "),n("p",[n("a",{attrs:{href:"https://pm2.keymetrics.io/docs/usage/quick-start/",target:"_blank",rel:"noopener noreferrer"}},[t._v("pm2 文档"),n("OutboundLink")],1)]),t._v(" "),n("h2",{attrs:{id:"http-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http-2"}},[t._v("#")]),t._v(" http 2")]),t._v(" "),n("h2",{attrs:{id:"部署问过程遇到的问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#部署问过程遇到的问题"}},[t._v("#")]),t._v(" 部署问过程遇到的问题")]),t._v(" "),n("p",[t._v("重启 nginx 之后，访问 ip 地址首页，有 403 错误，可以在安全组添加对应的端口。")])])}),[],!1,null,null,null);s.default=e.exports}}]);