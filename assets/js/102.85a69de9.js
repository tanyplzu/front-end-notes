(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{520:function(a,t,s){"use strict";s.r(t);var n=s(15),e=Object(n.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"web-项目开发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#web-项目开发"}},[a._v("#")]),a._v(" Web 项目开发")]),a._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#前端参数"}},[a._v("前端参数")]),s("ul",[s("li",[s("a",{attrs:{href:"#接收参数"}},[a._v("接收参数")])]),s("li",[s("a",{attrs:{href:"#lombok"}},[a._v("lombok")])]),s("li",[s("a",{attrs:{href:"#参数校验"}},[a._v("参数校验")])]),s("li",[s("a",{attrs:{href:"#valid-和-validated"}},[a._v("@valid 和 @validated")])]),s("li",[s("a",{attrs:{href:"#自定义校验"}},[a._v("自定义校验")])])])]),s("li",[s("a",{attrs:{href:"#数据库"}},[a._v("数据库")]),s("ul",[s("li",[s("a",{attrs:{href:"#数据表如何去创建"}},[a._v("数据表如何去创建")])]),s("li",[s("a",{attrs:{href:"#配置"}},[a._v("配置")])]),s("li",[s("a",{attrs:{href:"#打包配置"}},[a._v("打包配置")])]),s("li",[s("a",{attrs:{href:"#maven"}},[a._v("maven")])]),s("li",[s("a",{attrs:{href:"#jpa-的配置"}},[a._v("JPA 的配置")])]),s("li",[s("a",{attrs:{href:"#使用实体创建表"}},[a._v("使用实体创建表")])]),s("li",[s("a",{attrs:{href:"#表与表之间的关系"}},[a._v("表与表之间的关系")])]),s("li",[s("a",{attrs:{href:"#数据库的设计"}},[a._v("数据库的设计")])]),s("li",[s("a",{attrs:{href:"#数据设计例子"}},[a._v("数据设计例子")])]),s("li",[s("a",{attrs:{href:"#jpa-repository"}},[a._v("JPA Repository")])])])]),s("li",[s("a",{attrs:{href:"#orm"}},[a._v("ORM")]),s("ul",[s("li",[s("a",{attrs:{href:"#字段类型"}},[a._v("字段类型")])]),s("li",[s("a",{attrs:{href:"#序列化"}},[a._v("序列化")])]),s("li",[s("a",{attrs:{href:"#扩展数据库"}},[a._v("扩展数据库")])]),s("li",[s("a",{attrs:{href:"#静态资源"}},[a._v("静态资源")])]),s("li",[s("a",{attrs:{href:"#spu"}},[a._v("SPU")])])])])])]),s("p"),a._v(" "),s("h2",{attrs:{id:"前端参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前端参数"}},[a._v("#")]),a._v(" 前端参数")]),a._v(" "),s("ul",[s("li",[a._v("检验代码不能写到控制器，最好分离出去")]),a._v(" "),s("li",[a._v("控制器最好不要写业务逻辑")])]),a._v(" "),s("h3",{attrs:{id:"接收参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#接收参数"}},[a._v("#")]),a._v(" 接收参数")]),a._v(" "),s("ul",[s("li",[a._v("@PathVariable 接收"),s("code",[a._v("{name}")]),a._v("形式的参数")]),a._v(" "),s("li",[a._v("@requestParam 接收"),s("code",[a._v("?name")]),a._v("形式的参数")])]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("BannerController")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@GetMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/name/{name}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Banner")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getByName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@PathVariable")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@NotBlank")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Banner")]),a._v(" banner "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" bannerService"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getByName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" banner"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("post 格式的参数")]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("UserController")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@PostMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/wx_info"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@ScopeLevel")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("SuccessDTO")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("updateUserInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@RequestBody")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("SuccessDTO")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("ul",[s("li",[a._v("@RequestBody 接收 post body 中传入的参数")]),a._v(" "),s("li",[s("code",[a._v("Map<String,Object>")]),a._v(",键是 Sting,值不确定，有个拆箱和装箱的而过程，不建议这样写。")]),a._v(" "),s("li",[a._v("使用 DTO（数据传输对象）的方式去接收")])]),a._v(" "),s("h3",{attrs:{id:"lombok"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lombok"}},[a._v("#")]),a._v(" lombok")]),a._v(" "),s("ul",[s("li",[a._v("使用@getter 和@setter 注解生成 get 和 set 方法；")]),a._v(" "),s("li",[a._v("@NoArgsConstructor 无参的构造函数")]),a._v(" "),s("li",[a._v("@RequireArgsConstructor 生成一个必填项的构造函数")]),a._v(" "),s("li",[a._v("@NonNull，该字段不能为空")]),a._v(" "),s("li",[a._v("@build 模式使代码简洁")])]),a._v(" "),s("p",[a._v("一个类下面没有定义构造函数时，java 会默认一个无参的构造函数")]),a._v(" "),s("h3",{attrs:{id:"参数校验"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数校验"}},[a._v("#")]),a._v(" 参数校验")]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("javax"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("validation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("constraints"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("DecimalMax")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("javax"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("validation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("constraints"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("DecimalMin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("OrderDTO")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@DecimalMin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0.00"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" message "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"不在合法范围内"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@DecimalMax")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"99999999.99"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" message "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"不在合法范围内"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("BigDecimal")]),a._v(" totalPrice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Length")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("min"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" max"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" message "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"xxxxx"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@NotBlank")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("message "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"account不允许为空"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" account"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@TokenPassword")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("max"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("30")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" message "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"{token.password}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" password"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("关联 DTO 的校验，需要打上 @valid 注解")]),a._v(" "),s("h3",{attrs:{id:"valid-和-validated"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#valid-和-validated"}},[a._v("#")]),a._v(" @valid 和 @validated")]),a._v(" "),s("ul",[s("li",[a._v("都用于参数校验")]),a._v(" "),s("li",[a._v("开启验证一般用 @validated")]),a._v(" "),s("li",[a._v("关联 DTO 的校验，需要打上 @valid 注解")]),a._v(" "),s("li",[a._v("其它情况一般优先考虑 @validated")])]),a._v(" "),s("h3",{attrs:{id:"自定义校验"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义校验"}},[a._v("#")]),a._v(" 自定义校验")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://www.cnblogs.com/leeego-123/p/10820099.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("springboot使用hibernate validator校验"),s("OutboundLink")],1)]),a._v(" "),s("ul",[s("li",[a._v("验证密码两次是否相等")])]),a._v(" "),s("h2",{attrs:{id:"数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据库"}},[a._v("#")]),a._v(" 数据库")]),a._v(" "),s("h3",{attrs:{id:"数据表如何去创建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据表如何去创建"}},[a._v("#")]),a._v(" 数据表如何去创建")]),a._v(" "),s("ul",[s("li",[a._v("可视化工具")]),a._v(" "),s("li",[a._v("sql 语句")]),a._v(" "),s("li",[a._v("Model 映射表")])]),a._v(" "),s("h3",{attrs:{id:"配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[a._v("#")]),a._v(" 配置")]),a._v(" "),s("ul",[s("li",[a._v("在 application.properties 文件中或 application.yml")]),a._v(" "),s("li",[a._v("yml 文件层架较好，推荐使用")]),a._v(" "),s("li",[a._v("区分环境")])]),a._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("spring")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("profiles")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" active"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("dev\n")])])]),s("h3",{attrs:{id:"打包配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打包配置"}},[a._v("#")]),a._v(" 打包配置")]),a._v(" "),s("p",[a._v("spring boot 打出来的 jar 包叫 uber jar,内置了 tomcat 服务器。启动:")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("java -jar xxx.jar\njava -jar xxx.jar --spring.profiles.active"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("dev\n")])])]),s("h3",{attrs:{id:"maven"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#maven"}},[a._v("#")]),a._v(" maven")]),a._v(" "),s("p",[a._v("idea 中 maven work offline，取消离线模式。\n数据源的更改：在本项目或 maven 中修改")]),a._v(" "),s("h3",{attrs:{id:"jpa-的配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jpa-的配置"}},[a._v("#")]),a._v(" JPA 的配置")]),a._v(" "),s("p",[a._v("application.yml 中配置 jpa")]),a._v(" "),s("h3",{attrs:{id:"使用实体创建表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用实体创建表"}},[a._v("#")]),a._v(" 使用实体创建表")]),a._v(" "),s("ul",[s("li",[a._v("实体类中设置比较麻烦")]),a._v(" "),s("li",[a._v("关联表的关系")]),a._v(" "),s("li",[a._v("外键的问题，物理外键，逻辑外键")])]),a._v(" "),s("h3",{attrs:{id:"表与表之间的关系"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#表与表之间的关系"}},[a._v("#")]),a._v(" 表与表之间的关系")]),a._v(" "),s("ul",[s("li",[a._v("1 对 1 一般字段太多，分成多个表")]),a._v(" "),s("li",[a._v("1 对多 班级和学生")]),a._v(" "),s("li",[a._v("多对多 老师和学生")])]),a._v(" "),s("p",[a._v("为什么要 1 对 1：")]),a._v(" "),s("ul",[s("li",[a._v("查询效率")]),a._v(" "),s("li",[a._v("业务的角度")])]),a._v(" "),s("p",[a._v("多对多：")]),a._v(" "),s("ul",[s("li",[a._v("中间表，记录关系")]),a._v(" "),s("li",[a._v("用户和优惠券，是否使用过的状态需要记录在第三张表中")])]),a._v(" "),s("h3",{attrs:{id:"数据库的设计"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据库的设计"}},[a._v("#")]),a._v(" 数据库的设计")]),a._v(" "),s("ul",[s("li",[a._v("把表当成一个模型，把一个表当成一个实体模型")]),a._v(" "),s("li",[a._v("再考虑对象与对象的关系（使用外键建立关系）")]),a._v(" "),s("li",[a._v("细化：字段、限制、长度、小数点、索引")])]),a._v(" "),s("p",[a._v("优化")]),a._v(" "),s("ul",[s("li",[a._v("垂直分表和水平分表")]),a._v(" "),s("li",[a._v("查询方式（数据库的优化，更多再查询方式上），like 的效率很低")]),a._v(" "),s("li",[a._v("缓存多数据库最有效")])]),a._v(" "),s("h3",{attrs:{id:"数据设计例子"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据设计例子"}},[a._v("#")]),a._v(" 数据设计例子")]),a._v(" "),s("ul",[s("li",[a._v("@oneToMany 一对多")]),a._v(" "),s("li",[a._v("banner 和 banner_item")]),a._v(" "),s("li",[a._v("消除第三张表，使用外键，@JionColumn")]),a._v(" "),s("li",[a._v("@GeneratedValue(strategy = GenerationType.IDENTITY)")]),a._v(" "),s("li",[a._v("一般建议不要使用物理外键")])]),a._v(" "),s("h3",{attrs:{id:"jpa-repository"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jpa-repository"}},[a._v("#")]),a._v(" JPA Repository")]),a._v(" "),s("ul",[s("li",[a._v("Repository 接口规范(总接口)")]),a._v(" "),s("li",[a._v("CRUDRepository 接口(继承 Repository 接口)")]),a._v(" "),s("li",[a._v("PagingAndSorting 接口(继承 CRUDRepository 接口)")]),a._v(" "),s("li",[a._v("JPARepository 接口(继承 PagingAndSorting 接口)")]),a._v(" "),s("li",[a._v("JPASpecificationExecutor 接口")])]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("UsersDao")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("extends")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Repository")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Users")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Integer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//方法名称命名规则")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Users")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("findByUsername")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Users")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("findByUsernameLike")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Users")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("findByUsernameAndUserageGreaterThan")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Integer")]),a._v(" age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("配置后再控制台可以打印 sql 语句，也可以格式化")]),a._v(" "),s("ul",[s("li",[a._v("懒加载，节约性能")]),a._v(" "),s("li",[a._v("急加载")])]),a._v(" "),s("h2",{attrs:{id:"orm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#orm"}},[a._v("#")]),a._v(" ORM")]),a._v(" "),s("p",[a._v("用面向对象的方式去看待数据库")]),a._v(" "),s("p",[a._v("数据库的作用：")]),a._v(" "),s("ul",[s("li",[a._v("存储数据")]),a._v(" "),s("li",[a._v("存储关系")])]),a._v(" "),s("p",[a._v("表的创建：")]),a._v(" "),s("ul",[s("li",[a._v("数据库设计工具")]),a._v(" "),s("li",[a._v("SQL 定义 DDL")])]),a._v(" "),s("blockquote",[s("p",[a._v("DDL 是一种数据设计语言")])]),a._v(" "),s("p",[a._v("一个 Entity 例子：")]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Entity")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Getter")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Setter")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Where")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("clause "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"delete_time is null "')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Banner")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("extends")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("BaseEntity")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Id")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Long")]),a._v(" id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" description"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" title"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" img"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@OneToMany")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("fetch "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("FetchType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("LAZY"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@JoinColumn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"bannerId"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("BannerItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" items"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("ul",[s("li",[a._v("@Getter 和 @Setter 不用给每个字段加 getter 和 setter 方法；")]),a._v(" "),s("li",[a._v("可以将时间公共的字段放在基类中 BaseEntity")]),a._v(" "),s("li",[a._v("如果用数据表生成实体，不需要给实体的每个字段加长度等设置")]),a._v(" "),s("li",[a._v("FetchType.LAZY 序列化会触发懒加载，可以使用序列化阻止")])]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Getter")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Setter")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@MappedSuperclass")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("abstract")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("BaseEntity")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@JsonIgnore")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Column")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("insertable"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" updatable"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Date")]),a._v(" createTime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@JsonIgnore")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Column")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("insertable"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" updatable"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Date")]),a._v(" updateTime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@JsonIgnore")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Date")]),a._v(" deleteTime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("ul",[s("li",[a._v("abstract 抽象类")]),a._v(" "),s("li",[a._v("@MappedSuperclass 表示映射的基类，没有该注解，可能取不到时间的值")]),a._v(" "),s("li",[a._v("@JsonIgnore 结果不出现")])]),a._v(" "),s("h3",{attrs:{id:"字段类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#字段类型"}},[a._v("#")]),a._v(" 字段类型")]),a._v(" "),s("ul",[s("li",[a._v("时间可以设置默认值")]),a._v(" "),s("li",[a._v("价格的表示 decimal(10,2),一定不能用")])]),a._v(" "),s("h3",{attrs:{id:"序列化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#序列化"}},[a._v("#")]),a._v(" 序列化")]),a._v(" "),s("ul",[s("li",[a._v("默认库 jackson；fastjson，阿里的，简单些")]),a._v(" "),s("li",[a._v("@JsonIgnore")])]),a._v(" "),s("h3",{attrs:{id:"扩展数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#扩展数据库"}},[a._v("#")]),a._v(" 扩展数据库")]),a._v(" "),s("ul",[s("li",[a._v("表里的数据字段不够用")]),a._v(" "),s("li",[a._v("列不具备扩展性，行不具备扩展性（有时候可以解决数据扩展的问题）")]),a._v(" "),s("li",[a._v("没有特殊理由，可以把一些字段设置成文本，会更灵活的")])]),a._v(" "),s("h3",{attrs:{id:"静态资源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#静态资源"}},[a._v("#")]),a._v(" 静态资源")]),a._v(" "),s("ul",[s("li",[a._v("设置 controller 访问：容易控制权限，但速度较慢；")]),a._v(" "),s("li",[a._v("采用 thymeleaf,将图片放到路径'src\\main\\resources\\static\\imgs'下")]),a._v(" "),s("li",[a._v("不要把静态文件放到数据库")])]),a._v(" "),s("h3",{attrs:{id:"spu"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spu"}},[a._v("#")]),a._v(" SPU")]),a._v(" "),s("p",[a._v("列表信息需要返回概要数据还是详情数据？")])])}),[],!1,null,null,null);t.default=e.exports}}]);