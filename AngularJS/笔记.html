<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>笔记 | 朝花夕拾</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="朝花夕拾技术空间">
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, minimum-scale=1">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.d20caed7.css" as="style"><link rel="preload" href="/assets/js/app.2e565836.js" as="script"><link rel="preload" href="/assets/js/53.72aa59c3.js" as="script"><link rel="preload" href="/assets/js/2.e0269be8.js" as="script"><link rel="preload" href="/assets/js/1.c44a8a87.js" as="script"><link rel="preload" href="/assets/js/59.616ccfd0.js" as="script"><link rel="prefetch" href="/assets/js/100.bbb97386.js"><link rel="prefetch" href="/assets/js/101.8bd35b93.js"><link rel="prefetch" href="/assets/js/102.99cf87f5.js"><link rel="prefetch" href="/assets/js/103.dc3fc809.js"><link rel="prefetch" href="/assets/js/104.993fc457.js"><link rel="prefetch" href="/assets/js/105.bf452852.js"><link rel="prefetch" href="/assets/js/106.91365580.js"><link rel="prefetch" href="/assets/js/107.9b923468.js"><link rel="prefetch" href="/assets/js/108.e6ac235f.js"><link rel="prefetch" href="/assets/js/109.0b38b68e.js"><link rel="prefetch" href="/assets/js/11.11a65ec8.js"><link rel="prefetch" href="/assets/js/110.b028ae09.js"><link rel="prefetch" href="/assets/js/111.04b2f7d4.js"><link rel="prefetch" href="/assets/js/112.97863213.js"><link rel="prefetch" href="/assets/js/113.f8c3cf1b.js"><link rel="prefetch" href="/assets/js/114.c02552b7.js"><link rel="prefetch" href="/assets/js/115.fed4a5ff.js"><link rel="prefetch" href="/assets/js/116.9ce9905c.js"><link rel="prefetch" href="/assets/js/117.d74f2050.js"><link rel="prefetch" href="/assets/js/118.72a9294b.js"><link rel="prefetch" href="/assets/js/119.07a1d7ce.js"><link rel="prefetch" href="/assets/js/12.d44923b8.js"><link rel="prefetch" href="/assets/js/120.1c94762c.js"><link rel="prefetch" href="/assets/js/121.c75b3595.js"><link rel="prefetch" href="/assets/js/122.0495931f.js"><link rel="prefetch" href="/assets/js/123.4ed28b38.js"><link rel="prefetch" href="/assets/js/124.1e528059.js"><link rel="prefetch" href="/assets/js/125.7d20c57f.js"><link rel="prefetch" href="/assets/js/126.49cb2027.js"><link rel="prefetch" href="/assets/js/127.4f135547.js"><link rel="prefetch" href="/assets/js/128.5f8bb42e.js"><link rel="prefetch" href="/assets/js/129.ae5036f3.js"><link rel="prefetch" href="/assets/js/13.f6bfbf5f.js"><link rel="prefetch" href="/assets/js/130.39cf5dcd.js"><link rel="prefetch" href="/assets/js/131.cc3baaf1.js"><link rel="prefetch" href="/assets/js/132.19085dca.js"><link rel="prefetch" href="/assets/js/133.40f7ed2f.js"><link rel="prefetch" href="/assets/js/134.f9a0568c.js"><link rel="prefetch" href="/assets/js/135.b2b08a49.js"><link rel="prefetch" href="/assets/js/136.7d9ce6ec.js"><link rel="prefetch" href="/assets/js/137.181c944a.js"><link rel="prefetch" href="/assets/js/138.2da39e10.js"><link rel="prefetch" href="/assets/js/139.fdf1661c.js"><link rel="prefetch" href="/assets/js/14.39120ea6.js"><link rel="prefetch" href="/assets/js/140.fe69773f.js"><link rel="prefetch" href="/assets/js/141.b2d7123a.js"><link rel="prefetch" href="/assets/js/142.f2623407.js"><link rel="prefetch" href="/assets/js/143.56927922.js"><link rel="prefetch" href="/assets/js/144.93ddec23.js"><link rel="prefetch" href="/assets/js/145.352bdf21.js"><link rel="prefetch" href="/assets/js/146.410866d7.js"><link rel="prefetch" href="/assets/js/147.7a2b9455.js"><link rel="prefetch" href="/assets/js/148.68fe8a97.js"><link rel="prefetch" href="/assets/js/149.2934eb97.js"><link rel="prefetch" href="/assets/js/15.aafd58e3.js"><link rel="prefetch" href="/assets/js/150.b68fb904.js"><link rel="prefetch" href="/assets/js/151.8190d229.js"><link rel="prefetch" href="/assets/js/152.ae317efa.js"><link rel="prefetch" href="/assets/js/153.6fc9c1d1.js"><link rel="prefetch" href="/assets/js/154.0061855d.js"><link rel="prefetch" href="/assets/js/155.4f23794c.js"><link rel="prefetch" href="/assets/js/156.9dd41418.js"><link rel="prefetch" href="/assets/js/157.b722e6d4.js"><link rel="prefetch" href="/assets/js/158.8ef93bcd.js"><link rel="prefetch" href="/assets/js/159.92bef5fe.js"><link rel="prefetch" href="/assets/js/16.7cdfdee3.js"><link rel="prefetch" href="/assets/js/160.85c85508.js"><link rel="prefetch" href="/assets/js/161.216cb9fd.js"><link rel="prefetch" href="/assets/js/162.7bb2d6a4.js"><link rel="prefetch" href="/assets/js/163.fa4d6959.js"><link rel="prefetch" href="/assets/js/164.29219888.js"><link rel="prefetch" href="/assets/js/165.f291b672.js"><link rel="prefetch" href="/assets/js/166.e83c26e4.js"><link rel="prefetch" href="/assets/js/167.f5c7e434.js"><link rel="prefetch" href="/assets/js/168.97f4b7ac.js"><link rel="prefetch" href="/assets/js/169.59533e60.js"><link rel="prefetch" href="/assets/js/17.2f9fa8b1.js"><link rel="prefetch" href="/assets/js/170.1f371029.js"><link rel="prefetch" href="/assets/js/171.d026ad66.js"><link rel="prefetch" href="/assets/js/172.148728b3.js"><link rel="prefetch" href="/assets/js/173.74f23654.js"><link rel="prefetch" href="/assets/js/174.96603b71.js"><link rel="prefetch" href="/assets/js/175.4313b35d.js"><link rel="prefetch" href="/assets/js/176.64327ec7.js"><link rel="prefetch" href="/assets/js/177.0b81b4d2.js"><link rel="prefetch" href="/assets/js/178.28524f32.js"><link rel="prefetch" href="/assets/js/179.45fbe4a9.js"><link rel="prefetch" href="/assets/js/18.1615bcb9.js"><link rel="prefetch" href="/assets/js/180.7f0a0423.js"><link rel="prefetch" href="/assets/js/181.3051e1ed.js"><link rel="prefetch" href="/assets/js/182.9126380c.js"><link rel="prefetch" href="/assets/js/183.cb1ef1dd.js"><link rel="prefetch" href="/assets/js/184.f9634a4f.js"><link rel="prefetch" href="/assets/js/185.c381591b.js"><link rel="prefetch" href="/assets/js/186.2c9dc7a1.js"><link rel="prefetch" href="/assets/js/187.fb9e5db3.js"><link rel="prefetch" href="/assets/js/188.77c7c50e.js"><link rel="prefetch" href="/assets/js/189.b7e0ad25.js"><link rel="prefetch" href="/assets/js/19.08e227f3.js"><link rel="prefetch" href="/assets/js/190.16b74102.js"><link rel="prefetch" href="/assets/js/191.584d8427.js"><link rel="prefetch" href="/assets/js/192.a473f6bd.js"><link rel="prefetch" href="/assets/js/193.9c98a35c.js"><link rel="prefetch" href="/assets/js/194.51e221f8.js"><link rel="prefetch" href="/assets/js/195.5251462f.js"><link rel="prefetch" href="/assets/js/196.97f4f9c3.js"><link rel="prefetch" href="/assets/js/197.db0c4176.js"><link rel="prefetch" href="/assets/js/198.831d0422.js"><link rel="prefetch" href="/assets/js/199.e8f15b22.js"><link rel="prefetch" href="/assets/js/20.605bdcf3.js"><link rel="prefetch" href="/assets/js/200.f2864919.js"><link rel="prefetch" href="/assets/js/201.7196fbc3.js"><link rel="prefetch" href="/assets/js/202.4a21ccbd.js"><link rel="prefetch" href="/assets/js/203.9744be7e.js"><link rel="prefetch" href="/assets/js/204.4f344138.js"><link rel="prefetch" href="/assets/js/205.c6de81ef.js"><link rel="prefetch" href="/assets/js/206.1443745e.js"><link rel="prefetch" href="/assets/js/207.95e7ee4e.js"><link rel="prefetch" href="/assets/js/208.587c9b8a.js"><link rel="prefetch" href="/assets/js/209.06be9a4a.js"><link rel="prefetch" href="/assets/js/21.96552e03.js"><link rel="prefetch" href="/assets/js/210.29f4efc0.js"><link rel="prefetch" href="/assets/js/211.4cf0296b.js"><link rel="prefetch" href="/assets/js/212.9f58279b.js"><link rel="prefetch" href="/assets/js/213.2129479e.js"><link rel="prefetch" href="/assets/js/214.a19e17eb.js"><link rel="prefetch" href="/assets/js/215.195c5f64.js"><link rel="prefetch" href="/assets/js/216.bb962a5d.js"><link rel="prefetch" href="/assets/js/217.3308608b.js"><link rel="prefetch" href="/assets/js/218.3b538e68.js"><link rel="prefetch" href="/assets/js/219.2702c693.js"><link rel="prefetch" href="/assets/js/22.9365049a.js"><link rel="prefetch" href="/assets/js/220.25d4452d.js"><link rel="prefetch" href="/assets/js/23.dde885f4.js"><link rel="prefetch" href="/assets/js/24.c2926c0e.js"><link rel="prefetch" href="/assets/js/25.4a525b44.js"><link rel="prefetch" href="/assets/js/26.98ecb5dd.js"><link rel="prefetch" href="/assets/js/27.c9a55d1c.js"><link rel="prefetch" href="/assets/js/28.befd3ed5.js"><link rel="prefetch" href="/assets/js/29.bb74639a.js"><link rel="prefetch" href="/assets/js/3.be66794d.js"><link rel="prefetch" href="/assets/js/30.ffb8250c.js"><link rel="prefetch" href="/assets/js/31.ed5d02bd.js"><link rel="prefetch" href="/assets/js/32.87ab1d4c.js"><link rel="prefetch" href="/assets/js/33.b032bf4e.js"><link rel="prefetch" href="/assets/js/34.880389f8.js"><link rel="prefetch" href="/assets/js/35.66ae1d49.js"><link rel="prefetch" href="/assets/js/36.e7e9efbc.js"><link rel="prefetch" href="/assets/js/37.6f366584.js"><link rel="prefetch" href="/assets/js/38.95ffcc13.js"><link rel="prefetch" href="/assets/js/39.742541f7.js"><link rel="prefetch" href="/assets/js/4.8bc67bf2.js"><link rel="prefetch" href="/assets/js/40.5d05faee.js"><link rel="prefetch" href="/assets/js/41.6d763b84.js"><link rel="prefetch" href="/assets/js/42.fb69cbe8.js"><link rel="prefetch" href="/assets/js/43.b4231e2c.js"><link rel="prefetch" href="/assets/js/44.b512911d.js"><link rel="prefetch" href="/assets/js/45.034f222c.js"><link rel="prefetch" href="/assets/js/46.4337d516.js"><link rel="prefetch" href="/assets/js/47.4c6afc40.js"><link rel="prefetch" href="/assets/js/48.d0f2fd60.js"><link rel="prefetch" href="/assets/js/49.778123f8.js"><link rel="prefetch" href="/assets/js/5.615387f8.js"><link rel="prefetch" href="/assets/js/50.4715acc2.js"><link rel="prefetch" href="/assets/js/51.d8faba76.js"><link rel="prefetch" href="/assets/js/52.d63ee36f.js"><link rel="prefetch" href="/assets/js/54.12af8a0d.js"><link rel="prefetch" href="/assets/js/55.4e06f8b9.js"><link rel="prefetch" href="/assets/js/56.41a1c129.js"><link rel="prefetch" href="/assets/js/57.9ca6daee.js"><link rel="prefetch" href="/assets/js/58.bae39f90.js"><link rel="prefetch" href="/assets/js/6.87a783be.js"><link rel="prefetch" href="/assets/js/60.7c835705.js"><link rel="prefetch" href="/assets/js/61.82b40914.js"><link rel="prefetch" href="/assets/js/62.2b99edca.js"><link rel="prefetch" href="/assets/js/63.8555d981.js"><link rel="prefetch" href="/assets/js/64.9c6fc293.js"><link rel="prefetch" href="/assets/js/65.cf27ae8f.js"><link rel="prefetch" href="/assets/js/66.96a5e643.js"><link rel="prefetch" href="/assets/js/67.ae78e826.js"><link rel="prefetch" href="/assets/js/68.d6ec66ec.js"><link rel="prefetch" href="/assets/js/69.b39842a8.js"><link rel="prefetch" href="/assets/js/7.a5cf5266.js"><link rel="prefetch" href="/assets/js/70.2c05a67c.js"><link rel="prefetch" href="/assets/js/71.12aaf3ee.js"><link rel="prefetch" href="/assets/js/72.531c3a30.js"><link rel="prefetch" href="/assets/js/73.ef011254.js"><link rel="prefetch" href="/assets/js/74.9fb7fba2.js"><link rel="prefetch" href="/assets/js/75.7c9d08e9.js"><link rel="prefetch" href="/assets/js/76.4c0d9b75.js"><link rel="prefetch" href="/assets/js/77.3a92c9cd.js"><link rel="prefetch" href="/assets/js/78.59d3e822.js"><link rel="prefetch" href="/assets/js/79.3a31f293.js"><link rel="prefetch" href="/assets/js/80.c3006a35.js"><link rel="prefetch" href="/assets/js/81.bc5af2b4.js"><link rel="prefetch" href="/assets/js/82.7baa8176.js"><link rel="prefetch" href="/assets/js/83.c6573f38.js"><link rel="prefetch" href="/assets/js/84.933410d5.js"><link rel="prefetch" href="/assets/js/85.6f139ceb.js"><link rel="prefetch" href="/assets/js/86.3c462aca.js"><link rel="prefetch" href="/assets/js/87.71c4f647.js"><link rel="prefetch" href="/assets/js/88.c19c0025.js"><link rel="prefetch" href="/assets/js/89.70ade42e.js"><link rel="prefetch" href="/assets/js/90.26905db9.js"><link rel="prefetch" href="/assets/js/91.01fccd16.js"><link rel="prefetch" href="/assets/js/92.b24b6704.js"><link rel="prefetch" href="/assets/js/93.13ebd189.js"><link rel="prefetch" href="/assets/js/94.2927dca6.js"><link rel="prefetch" href="/assets/js/95.13cb4e38.js"><link rel="prefetch" href="/assets/js/96.67628088.js"><link rel="prefetch" href="/assets/js/97.18b9c9a9.js"><link rel="prefetch" href="/assets/js/98.290bec64.js"><link rel="prefetch" href="/assets/js/99.d06f9cd3.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.f862dbd1.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.ba24f44a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d20caed7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">朝花夕拾</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Introduction.html" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/FrontEnd/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">前端框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">前端框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://vue3.tanyp.xyz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/Vue/" class="nav-link">
  Vue2
</a></li><li class="dropdown-item"><!----> <a href="/AngularJS/" class="nav-link router-link-active">
  AngularJS
</a></li></ul></div></div><div class="nav-item"><a href="/JsFrame/" class="nav-link">
  技术方案
</a></div><div class="nav-item"><a href="/FrontEndTool/" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="/NodeJS/" class="nav-link">
  NodeJS
</a></div><div class="nav-item"><a href="/TS/" class="nav-link">
  TypeScript
</a></div><div class="nav-item"><a href="/Java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/notes/" class="nav-link">
  Notes
</a></div><div class="nav-item"><a href="/Reading/" class="nav-link">
  Reading
</a></div><div class="nav-item"><a href="/DSA/" class="nav-link">
  数据结构与算法
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Introduction.html" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/FrontEnd/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">前端框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">前端框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://vue3.tanyp.xyz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/Vue/" class="nav-link">
  Vue2
</a></li><li class="dropdown-item"><!----> <a href="/AngularJS/" class="nav-link router-link-active">
  AngularJS
</a></li></ul></div></div><div class="nav-item"><a href="/JsFrame/" class="nav-link">
  技术方案
</a></div><div class="nav-item"><a href="/FrontEndTool/" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="/NodeJS/" class="nav-link">
  NodeJS
</a></div><div class="nav-item"><a href="/TS/" class="nav-link">
  TypeScript
</a></div><div class="nav-item"><a href="/Java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/notes/" class="nav-link">
  Notes
</a></div><div class="nav-item"><a href="/Reading/" class="nav-link">
  Reading
</a></div><div class="nav-item"><a href="/DSA/" class="nav-link">
  数据结构与算法
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/AngularJS/Scope和Digest.html" class="sidebar-link">Scope 和 Digest</a></li><li><a href="/AngularJS/DI.html" class="sidebar-link">DI</a></li><li><a href="/AngularJS/指令.html" class="sidebar-link">指令</a></li><li><a href="/AngularJS/parse和eval.html" class="sidebar-link">$parse和$eval的用法</a></li><li><a href="/AngularJS/笔记.html" class="active sidebar-link">笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/AngularJS/笔记.html#angularjs-笔记" class="sidebar-link">AngularJS 笔记</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="angularjs-笔记"><a href="#angularjs-笔记" class="header-anchor">#</a> AngularJS 笔记</h2> <p></p><div class="table-of-contents"><ul><li><a href="#angularjs-笔记">AngularJS 笔记</a><ul><li><a href="#脏检查机制">脏检查机制</a></li><li><a href="#watch">$watch</a></li><li><a href="#digest">$digest</a></li><li><a href="#apply">$apply</a></li><li><a href="#内置-服务替代原生服务">内置$服务替代原生服务</a></li><li><a href="#在-angularjs-中-provider、factory-和-service-有什么区别">在 AngularJS 中 Provider、Factory 和 Service 有什么区别？</a></li><li><a href="#injector">$injector</a></li><li><a href="#独立-scope-声明中的-、-、-三种形式">独立 scope 声明中的“@”、“&amp;”、“=”三种形式</a></li><li><a href="#restrict">restrict</a></li><li><a href="#observe">$observe</a></li><li><a href="#angular-element">angular.element</a></li></ul></li></ul></div><p></p> <h3 id="脏检查机制"><a href="#脏检查机制" class="header-anchor">#</a> 脏检查机制</h3> <p>用一句话来概括“脏检查机制”：Angular 将双向绑定转换为一堆 watch 表达式，然后递归检查这些 watch 表达式的结果是否变了，如果变了，则执行相应的 watcher 函数。等到 Model 的值不再变化，也就不会再有 watcher 函数被触发，一个完整的 digest 循环就结束了。这时，浏览器就会重新渲染 DOM 来体现 model 的改变。这里所说的 watcher 函数，是由 View 上的指令（如 ngBind、ngShow、ngHide 等）或 <code>{{}}</code> 表达式（严格来说是$compile 服务）所注册的。指令在 Angular 的 compile 阶段会被逐一解析、注册。</p> <p>$rootScope对象是Angular中所有$scope 对象的祖先。所有的$scope都是直接或者间接利用$rootScope 提供的$new方法创建的。它们都从$rootScope 中继承了$new，$watch，$watchGroup、$watchCollection、$digest、$destroy、$eval、$evalAsync、$apply、$on、$emit、$broadcast 等方法，并且有$id、$parent 这两个属性。</p> <h3 id="watch"><a href="#watch" class="header-anchor">#</a> $watch</h3> <p>watch 表达式很灵活：可以是一个函数，可以是$scope上的一个属性名，也可以是一个字符串形式的表达式。$scope 上的属性名或表达式，最终仍会被$parse服务解析为响应的获取属性值的函数。$watch 函数会返回一个反注册函数，一旦我们调用它，就可以移除刚才注册的 watcher。</p> <p>需要注意的是，Angular 默认是不会使用 angular.equals()函数进行深度比较的，因为使用===比较会更快，所以，它对数组或者 Object 进行比较时检查的是引用。这就导致内容完全相同的两个表达式被判定为不同。如果需要进行深度比较，第三个可选参数 objectEquality，需要显式设置为 true，如$watch（'someExp'，function()，{...}，true）。</p> <p>Angular 还提供了$watchGroup、$watchCollection 方法来监听数组或者是一组属性。</p> <h3 id="digest"><a href="#digest" class="header-anchor">#</a> $digest</h3> <p>$digest循环实际上包括两个while循环。它们分别是：处理$evalAsync 的异步运算队列，处理$watch 的 watchers 队列。</p> <p>遍历一遍所有 watcher 函数称为一轮脏检查。执行完一轮脏检查，如果任何一个 watcher 所监听的值改变过，那么就会重新再进行一轮脏检查，直到所有的 watcher 函数都报告其所监听的值不再变了。</p> <p>从第一轮脏检查到结果变得稳定，这个过程就是一个完整的$digest循环。当$digest 循环结束时，才把模型的变化结果更新到 DOM 中去。这样可以合并多个更新，防止频繁的 DOM 操作。</p> <h3 id="apply"><a href="#apply" class="header-anchor">#</a> $apply</h3> <p>$digest是一个内部函数，正常的应用代码中是不应该直接调用它的。要想主动触发它，就要调用scope.$apply 函数，它是触发 Angular“脏检查机制”的常用公开接口。</p> <p>$apply函数也很少需要主动调用，因为在各种Angular事件指令以及$timeout 等服务中，都会自动调用它一次来确保界面刷新。如果你要自己挂接第三方组件的事件，那么就要记得调用一次$apply 了，否则在这个事件处理函数中对 scope 变量的更新就不会更新到界面上。</p> <h3 id="内置-服务替代原生服务"><a href="#内置-服务替代原生服务" class="header-anchor">#</a> 内置$服务替代原生服务</h3> <p>应注意以下几点：</p> <ul><li>$timeout 替代 setTimeout</li> <li>$Interval 替代 setInterval</li> <li>$window 替代 window</li> <li>$document 替代 document</li> <li>$resource或$http 替代$.ajax</li> <li>angular.element 替代$</li></ul> <p>这样可以避免手动调用$scope.$apply 启动“脏检查机制”的问题、获得更多的 API，并在测试中更好地进行 Mock。</p> <h3 id="在-angularjs-中-provider、factory-和-service-有什么区别"><a href="#在-angularjs-中-provider、factory-和-service-有什么区别" class="header-anchor">#</a> 在 AngularJS 中 Provider、Factory 和 Service 有什么区别？</h3> <p>Factory 相当于拿到：factoryResult</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> factoryResult <span class="token operator">=</span> <span class="token function">MyFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Service 相当于拿到：serviceObj</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> serviceObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Provider 相当于拿到：providerObj</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> providerObj <span class="token operator">=</span> instance<span class="token punctuation">.</span><span class="token function">$get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Factory/service 是第一个注入时才实例化，而 provider 不是，它是在 config 之前就已实例化好</p> <h3 id="injector"><a href="#injector" class="header-anchor">#</a> $injector</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 在控制器或其他地方获取 $injector 服务</span>
app<span class="token punctuation">.</span><span class="token function">controller</span><span class="token punctuation">(</span><span class="token string">&quot;MyController&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;$injector&quot;</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">$injector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用 $injector 来获取服务实例</span>
    <span class="token keyword">var</span> myServiceInstance <span class="token operator">=</span> $injector<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;myService&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 手动创建新的服务实例</span>
    <span class="token keyword">var</span> newServiceInstance <span class="token operator">=</span> $injector<span class="token punctuation">.</span><span class="token function">instantiate</span><span class="token punctuation">(</span>myService<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>get(name)：用于获取指定名称的服务实例。通过名称获取已注册的服务，返回该服务的实例。</li> <li>invoke(fn, self, locals)：用于调用函数并注入依赖项。可以调用指定的函数，并自动注入函数所需的依赖项。</li> <li>annotate(fn)：用于获取函数的参数列表，包括依赖项。返回一个函数的参数列表，包括需要注入的依赖项。</li> <li>has(name)：用于检查是否存在指定名称的服务。检查指定名称的服务是否已经注册。</li> <li>instantiate(Type, locals)：用于实例化一个构造函数，并注入依赖项。实例化一个构造函数，并自动注入构造函数所需的依赖项。</li> <li>loadNewModules(modules)：用于加载新的模块并使其可用于依赖注入。这个方法的作用是动态加载新的模块，以便在应用程序中使用新模块中定义的服务，以实现动态模块加载和依赖注入。</li></ul> <h3 id="独立-scope-声明中的-、-、-三种形式"><a href="#独立-scope-声明中的-、-、-三种形式" class="header-anchor">#</a> 独立 scope 声明中的“@”、“&amp;”、“=”三种形式</h3> <p>@：用于单向绑定，将父作用域的值传递给指令的作用域。这种绑定只支持字符串，并且支持使用<code>{{}}</code>表达式进行插值。</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">&quot;myDirective&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">restrict</span><span class="token operator">:</span> <span class="token string">&quot;E&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">scope</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">isolatedAttribute</span><span class="token operator">:</span> <span class="token string">&quot;@&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&quot;&lt;div&gt;{{isolatedAttribute}}&lt;/div&gt;&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>=：用于双向绑定，将父作用域的模型与指令的独立作用域的模型进行关联。这意味着对一个模型的更改会影响另一个模型，反之亦然。</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">&quot;myDirective&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">restrict</span><span class="token operator">:</span> <span class="token string">&quot;E&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">scope</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">isolatedBinding</span><span class="token operator">:</span> <span class="token string">&quot;=&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'&lt;input ng-model=&quot;isolatedBinding&quot;&gt;'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>&amp;：用于在独立作用域中调用父作用域的函数，并传递参数。这种绑定允许指令调用父作用域中的函数。</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">&quot;myDirective&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">restrict</span><span class="token operator">:</span> <span class="token string">&quot;E&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">scope</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">isolatedExpression</span><span class="token operator">:</span> <span class="token string">&quot;&amp;&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'&lt;button ng-click=&quot;isolatedExpression()&quot;&gt;Click&lt;/button&gt;'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="restrict"><a href="#restrict" class="header-anchor">#</a> restrict</h3> <p><code>A</code>：表示指令可以作为 HTML 元素的属性使用。例如：<code>&lt;div my-directive&gt;&lt;/div&gt;</code></p> <p><code>E</code>：表示指令可以作为 HTML 元素使用。例如：<code>&lt;my-directive&gt;&lt;/my-directive&gt;</code></p> <p><code>C</code>：表示指令可以作为类名使用。例如：<code>&lt;div class=&quot;my-directive&quot;&gt;&lt;/div&gt;</code></p> <p><code>M</code>：表示指令可以作为 HTML 注释使用。例如：<code>&lt;!-- directive: my-directive --&gt;</code></p> <p>这些值可以组合使用，例如'A'和'E'可以一起使用，表示指令可以作为 HTML 元素和属性使用。但是最佳实践建议只使用'A'和'E'两种类型。</p> <h3 id="observe"><a href="#observe" class="header-anchor">#</a> $observe</h3> <ul><li>$observe 方法是在 link 函数中使用的，用于监视指令的属性变化。</li> <li>$observe 方法接受两个参数：属性名和回调函数。当指令的属性发生变化时，回调函数会被调用。</li> <li>$observe 方法只能用于监视指令的属性，而不能用于监视作用域中的变量。</li> <li>$observe 方法通常用于监视 HTML 属性的变化，例如 class、style 等。</li> <li>当指令的属性值是插值表达式（如{{<code>variable</code>}}）时，$observe 方法会在表达式的值发生变化时被调用。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">&quot;myDirective&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">restrict</span><span class="token operator">:</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">link</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">scope<span class="token punctuation">,</span> element<span class="token punctuation">,</span> attrs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      attrs<span class="token punctuation">.</span><span class="token function">$observe</span><span class="token punctuation">(</span><span class="token string">&quot;myAttribute&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;myAttribute值发生变化：&quot;</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="angular-element"><a href="#angular-element" class="header-anchor">#</a> angular.element</h3> <p>angular.element 是 AngularJS 中用于操作 DOM 元素的函数。它返回一个包装了原生 DOM 元素的 jQuery lite 对象，因此可以使用类似 jQuery 的方法来操作 DOM。</p> <p>在 AngularJS 中，angular.element 可以用于以下情况：</p> <p>在指令的链接函数中使用，以便在指令的 DOM 元素上执行操作。
在控制器中使用，但通常不建议在控制器中直接操作 DOM 元素。
以下是一个简单的示例，演示了如何在 AngularJS 中使用 angular.element：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 在指令中使用 angular.element</span>
app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">&quot;myDirective&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">link</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">scope<span class="token punctuation">,</span> element<span class="token punctuation">,</span> attrs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 使用 angular.element 操作指令的 DOM 元素</span>
      angular<span class="token punctuation">.</span><span class="token function">element</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">&quot;highlight&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在控制器中使用 angular.element</span>
app<span class="token punctuation">.</span><span class="token function">controller</span><span class="token punctuation">(</span><span class="token string">&quot;myController&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">$scope<span class="token punctuation">,</span> $element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 不建议在控制器中直接操作 DOM 元素</span>
  <span class="token comment">// 但如果需要，可以使用 angular.element</span>
  angular<span class="token punctuation">.</span><span class="token function">element</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#myElement&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">&quot;highlight&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>addClass(className): 添加一个或多个类名到元素。</li> <li>removeClass(className): 移除一个或多个类名。</li> <li>toggleClass(className, condition): 如果存在（不存在）就移除（添加）一个类。</li> <li>attr(name, value): 获取或设置元素的属性。</li> <li>removeAttr(name): 移除元素的属性。</li> <li>css(property, value): 获取或设置元素的 CSS 样式。</li> <li>on(eventType, handler): 绑定事件处理程序。</li> <li>off(eventType, handler): 移除事件处理程序。</li> <li>find(selector): 在元素内部查找匹配选择器的元素。</li> <li>parent(): 获取父元素。</li> <li>children(): 获取子元素。</li> <li>html(): 获取或设置元素的 HTML 内容。</li> <li>text(): 获取或设置元素的文本内容。</li> <li>clone(): 克隆元素。</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/AngularJS/parse和eval.html" class="prev">
        $parse和$eval的用法
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.2e565836.js" defer></script><script src="/assets/js/53.72aa59c3.js" defer></script><script src="/assets/js/2.e0269be8.js" defer></script><script src="/assets/js/1.c44a8a87.js" defer></script><script src="/assets/js/59.616ccfd0.js" defer></script>
  </body>
</html>
