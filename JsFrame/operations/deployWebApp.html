<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>部署一个静态网站 | 朝花夕拾</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="朝花夕拾技术空间">
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, minimum-scale=1">
    <meta name="theme-color" content="#000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.d20caed7.css" as="style"><link rel="preload" href="/assets/js/app.28371f0c.js" as="script"><link rel="preload" href="/assets/js/53.72aa59c3.js" as="script"><link rel="preload" href="/assets/js/2.e0269be8.js" as="script"><link rel="preload" href="/assets/js/1.c44a8a87.js" as="script"><link rel="preload" href="/assets/js/18.1615bcb9.js" as="script"><link rel="prefetch" href="/assets/js/100.bbb97386.js"><link rel="prefetch" href="/assets/js/101.69404adc.js"><link rel="prefetch" href="/assets/js/102.9fb45ca8.js"><link rel="prefetch" href="/assets/js/103.a1132e11.js"><link rel="prefetch" href="/assets/js/104.993fc457.js"><link rel="prefetch" href="/assets/js/105.bf452852.js"><link rel="prefetch" href="/assets/js/106.bbc72832.js"><link rel="prefetch" href="/assets/js/107.6c1d39c7.js"><link rel="prefetch" href="/assets/js/108.41b8b225.js"><link rel="prefetch" href="/assets/js/109.0b38b68e.js"><link rel="prefetch" href="/assets/js/11.11a65ec8.js"><link rel="prefetch" href="/assets/js/110.e766686e.js"><link rel="prefetch" href="/assets/js/111.04b2f7d4.js"><link rel="prefetch" href="/assets/js/112.dba31f2d.js"><link rel="prefetch" href="/assets/js/113.830b0392.js"><link rel="prefetch" href="/assets/js/114.c02552b7.js"><link rel="prefetch" href="/assets/js/115.fed4a5ff.js"><link rel="prefetch" href="/assets/js/116.9ce9905c.js"><link rel="prefetch" href="/assets/js/117.d74f2050.js"><link rel="prefetch" href="/assets/js/118.72a9294b.js"><link rel="prefetch" href="/assets/js/119.82f86d67.js"><link rel="prefetch" href="/assets/js/12.d44923b8.js"><link rel="prefetch" href="/assets/js/120.baa5884f.js"><link rel="prefetch" href="/assets/js/121.c8395d49.js"><link rel="prefetch" href="/assets/js/122.5458ab73.js"><link rel="prefetch" href="/assets/js/123.ec4b2b31.js"><link rel="prefetch" href="/assets/js/124.073aac9d.js"><link rel="prefetch" href="/assets/js/125.bacd271e.js"><link rel="prefetch" href="/assets/js/126.9ed9012c.js"><link rel="prefetch" href="/assets/js/127.691fcc21.js"><link rel="prefetch" href="/assets/js/128.5f8bb42e.js"><link rel="prefetch" href="/assets/js/129.ae5036f3.js"><link rel="prefetch" href="/assets/js/13.f6bfbf5f.js"><link rel="prefetch" href="/assets/js/130.7cc88dec.js"><link rel="prefetch" href="/assets/js/131.8ceb7784.js"><link rel="prefetch" href="/assets/js/132.cf2881c4.js"><link rel="prefetch" href="/assets/js/133.8f0f2551.js"><link rel="prefetch" href="/assets/js/134.9ed92a81.js"><link rel="prefetch" href="/assets/js/135.cee24145.js"><link rel="prefetch" href="/assets/js/136.f59ca197.js"><link rel="prefetch" href="/assets/js/137.924277b7.js"><link rel="prefetch" href="/assets/js/138.5faeb486.js"><link rel="prefetch" href="/assets/js/139.fdf1661c.js"><link rel="prefetch" href="/assets/js/14.39120ea6.js"><link rel="prefetch" href="/assets/js/140.fe69773f.js"><link rel="prefetch" href="/assets/js/141.a02bc565.js"><link rel="prefetch" href="/assets/js/142.0c9a128e.js"><link rel="prefetch" href="/assets/js/143.56927922.js"><link rel="prefetch" href="/assets/js/144.09660387.js"><link rel="prefetch" href="/assets/js/145.22fa0ad2.js"><link rel="prefetch" href="/assets/js/146.0d7067e7.js"><link rel="prefetch" href="/assets/js/147.bb0b9b19.js"><link rel="prefetch" href="/assets/js/148.775a0a0d.js"><link rel="prefetch" href="/assets/js/149.6437aa59.js"><link rel="prefetch" href="/assets/js/15.aafd58e3.js"><link rel="prefetch" href="/assets/js/150.61a22ce9.js"><link rel="prefetch" href="/assets/js/151.8190d229.js"><link rel="prefetch" href="/assets/js/152.ae317efa.js"><link rel="prefetch" href="/assets/js/153.6fc9c1d1.js"><link rel="prefetch" href="/assets/js/154.0061855d.js"><link rel="prefetch" href="/assets/js/155.d4ce68fa.js"><link rel="prefetch" href="/assets/js/156.9dd41418.js"><link rel="prefetch" href="/assets/js/157.a252d5ec.js"><link rel="prefetch" href="/assets/js/158.ee0cde67.js"><link rel="prefetch" href="/assets/js/159.cdd050a6.js"><link rel="prefetch" href="/assets/js/16.7cdfdee3.js"><link rel="prefetch" href="/assets/js/160.ca990cfa.js"><link rel="prefetch" href="/assets/js/161.216cb9fd.js"><link rel="prefetch" href="/assets/js/162.b077daa9.js"><link rel="prefetch" href="/assets/js/163.4e25f11b.js"><link rel="prefetch" href="/assets/js/164.b07054b0.js"><link rel="prefetch" href="/assets/js/165.3f9b368d.js"><link rel="prefetch" href="/assets/js/166.34bc5d90.js"><link rel="prefetch" href="/assets/js/167.86d8b44d.js"><link rel="prefetch" href="/assets/js/168.97f4b7ac.js"><link rel="prefetch" href="/assets/js/169.59533e60.js"><link rel="prefetch" href="/assets/js/17.2f9fa8b1.js"><link rel="prefetch" href="/assets/js/170.1f371029.js"><link rel="prefetch" href="/assets/js/171.032b7004.js"><link rel="prefetch" href="/assets/js/172.148728b3.js"><link rel="prefetch" href="/assets/js/173.5fbb5a71.js"><link rel="prefetch" href="/assets/js/174.6e5fc3aa.js"><link rel="prefetch" href="/assets/js/175.7cdc2599.js"><link rel="prefetch" href="/assets/js/176.46175fbe.js"><link rel="prefetch" href="/assets/js/177.0b81b4d2.js"><link rel="prefetch" href="/assets/js/178.ffc4fbe4.js"><link rel="prefetch" href="/assets/js/179.c89438a5.js"><link rel="prefetch" href="/assets/js/180.67f7d3ee.js"><link rel="prefetch" href="/assets/js/181.3051e1ed.js"><link rel="prefetch" href="/assets/js/182.4ea37ef0.js"><link rel="prefetch" href="/assets/js/183.8d92a4a1.js"><link rel="prefetch" href="/assets/js/184.f9634a4f.js"><link rel="prefetch" href="/assets/js/185.c381591b.js"><link rel="prefetch" href="/assets/js/186.2a095a41.js"><link rel="prefetch" href="/assets/js/187.fb9e5db3.js"><link rel="prefetch" href="/assets/js/188.49ab1933.js"><link rel="prefetch" href="/assets/js/189.b7e0ad25.js"><link rel="prefetch" href="/assets/js/19.ac050cb2.js"><link rel="prefetch" href="/assets/js/190.54d5c2e5.js"><link rel="prefetch" href="/assets/js/191.6af8c375.js"><link rel="prefetch" href="/assets/js/192.7b371d27.js"><link rel="prefetch" href="/assets/js/193.93e484cb.js"><link rel="prefetch" href="/assets/js/194.51e221f8.js"><link rel="prefetch" href="/assets/js/195.5251462f.js"><link rel="prefetch" href="/assets/js/196.97f4f9c3.js"><link rel="prefetch" href="/assets/js/197.db0c4176.js"><link rel="prefetch" href="/assets/js/198.831d0422.js"><link rel="prefetch" href="/assets/js/199.02c421c5.js"><link rel="prefetch" href="/assets/js/20.605bdcf3.js"><link rel="prefetch" href="/assets/js/200.90053ab7.js"><link rel="prefetch" href="/assets/js/201.a545a63d.js"><link rel="prefetch" href="/assets/js/202.d997b092.js"><link rel="prefetch" href="/assets/js/203.4b7e4b10.js"><link rel="prefetch" href="/assets/js/204.02319664.js"><link rel="prefetch" href="/assets/js/205.274c9ffe.js"><link rel="prefetch" href="/assets/js/206.8dd308cd.js"><link rel="prefetch" href="/assets/js/207.8d8416a8.js"><link rel="prefetch" href="/assets/js/208.c1f23f07.js"><link rel="prefetch" href="/assets/js/209.06be9a4a.js"><link rel="prefetch" href="/assets/js/21.96552e03.js"><link rel="prefetch" href="/assets/js/210.29f4efc0.js"><link rel="prefetch" href="/assets/js/211.4cf0296b.js"><link rel="prefetch" href="/assets/js/212.9f58279b.js"><link rel="prefetch" href="/assets/js/213.013a42b0.js"><link rel="prefetch" href="/assets/js/214.14cca2bc.js"><link rel="prefetch" href="/assets/js/215.195c5f64.js"><link rel="prefetch" href="/assets/js/216.90bea12c.js"><link rel="prefetch" href="/assets/js/217.3308608b.js"><link rel="prefetch" href="/assets/js/218.a87a97f6.js"><link rel="prefetch" href="/assets/js/219.2702c693.js"><link rel="prefetch" href="/assets/js/22.f7e0fa2d.js"><link rel="prefetch" href="/assets/js/220.25d4452d.js"><link rel="prefetch" href="/assets/js/23.dde885f4.js"><link rel="prefetch" href="/assets/js/24.c2926c0e.js"><link rel="prefetch" href="/assets/js/25.4a525b44.js"><link rel="prefetch" href="/assets/js/26.98ecb5dd.js"><link rel="prefetch" href="/assets/js/27.4d5e0342.js"><link rel="prefetch" href="/assets/js/28.2cea1260.js"><link rel="prefetch" href="/assets/js/29.bb74639a.js"><link rel="prefetch" href="/assets/js/3.be66794d.js"><link rel="prefetch" href="/assets/js/30.bf69ae5b.js"><link rel="prefetch" href="/assets/js/31.f032b4d9.js"><link rel="prefetch" href="/assets/js/32.87ab1d4c.js"><link rel="prefetch" href="/assets/js/33.8982be72.js"><link rel="prefetch" href="/assets/js/34.880389f8.js"><link rel="prefetch" href="/assets/js/35.d32837ce.js"><link rel="prefetch" href="/assets/js/36.ea0972c9.js"><link rel="prefetch" href="/assets/js/37.d10a474b.js"><link rel="prefetch" href="/assets/js/38.95ffcc13.js"><link rel="prefetch" href="/assets/js/39.dc4ee4d5.js"><link rel="prefetch" href="/assets/js/4.8bc67bf2.js"><link rel="prefetch" href="/assets/js/40.a466ca10.js"><link rel="prefetch" href="/assets/js/41.4917a3ba.js"><link rel="prefetch" href="/assets/js/42.9051d65f.js"><link rel="prefetch" href="/assets/js/43.b4231e2c.js"><link rel="prefetch" href="/assets/js/44.b512911d.js"><link rel="prefetch" href="/assets/js/45.3dfc18eb.js"><link rel="prefetch" href="/assets/js/46.f6c8601c.js"><link rel="prefetch" href="/assets/js/47.2e388e36.js"><link rel="prefetch" href="/assets/js/48.d0f2fd60.js"><link rel="prefetch" href="/assets/js/49.8a32dcdb.js"><link rel="prefetch" href="/assets/js/5.615387f8.js"><link rel="prefetch" href="/assets/js/50.d981f93d.js"><link rel="prefetch" href="/assets/js/51.d8faba76.js"><link rel="prefetch" href="/assets/js/52.d63ee36f.js"><link rel="prefetch" href="/assets/js/54.f46c429e.js"><link rel="prefetch" href="/assets/js/55.a09411af.js"><link rel="prefetch" href="/assets/js/56.9d7794d3.js"><link rel="prefetch" href="/assets/js/57.9ca6daee.js"><link rel="prefetch" href="/assets/js/58.bae39f90.js"><link rel="prefetch" href="/assets/js/59.616ccfd0.js"><link rel="prefetch" href="/assets/js/6.87a783be.js"><link rel="prefetch" href="/assets/js/60.1de55fbe.js"><link rel="prefetch" href="/assets/js/61.82b40914.js"><link rel="prefetch" href="/assets/js/62.48345531.js"><link rel="prefetch" href="/assets/js/63.68273146.js"><link rel="prefetch" href="/assets/js/64.4564a9ad.js"><link rel="prefetch" href="/assets/js/65.f1c28c07.js"><link rel="prefetch" href="/assets/js/66.8ca0abdd.js"><link rel="prefetch" href="/assets/js/67.ae78e826.js"><link rel="prefetch" href="/assets/js/68.d6ec66ec.js"><link rel="prefetch" href="/assets/js/69.b39842a8.js"><link rel="prefetch" href="/assets/js/7.a5cf5266.js"><link rel="prefetch" href="/assets/js/70.f3d16a6e.js"><link rel="prefetch" href="/assets/js/71.d3004315.js"><link rel="prefetch" href="/assets/js/72.332df1dc.js"><link rel="prefetch" href="/assets/js/73.40d4efc6.js"><link rel="prefetch" href="/assets/js/74.c7dac0ed.js"><link rel="prefetch" href="/assets/js/75.7c9d08e9.js"><link rel="prefetch" href="/assets/js/76.1547259f.js"><link rel="prefetch" href="/assets/js/77.1213fbc3.js"><link rel="prefetch" href="/assets/js/78.d642f767.js"><link rel="prefetch" href="/assets/js/79.c2432bf6.js"><link rel="prefetch" href="/assets/js/80.2e9f3b4c.js"><link rel="prefetch" href="/assets/js/81.c51fcaf9.js"><link rel="prefetch" href="/assets/js/82.7baa8176.js"><link rel="prefetch" href="/assets/js/83.8a2645cd.js"><link rel="prefetch" href="/assets/js/84.7c171808.js"><link rel="prefetch" href="/assets/js/85.e8b15d6f.js"><link rel="prefetch" href="/assets/js/86.fd6d486b.js"><link rel="prefetch" href="/assets/js/87.865837dd.js"><link rel="prefetch" href="/assets/js/88.cb244d8b.js"><link rel="prefetch" href="/assets/js/89.8a2ff4eb.js"><link rel="prefetch" href="/assets/js/90.2eb62df3.js"><link rel="prefetch" href="/assets/js/91.32ee33cb.js"><link rel="prefetch" href="/assets/js/92.c2095f6e.js"><link rel="prefetch" href="/assets/js/93.71ee9727.js"><link rel="prefetch" href="/assets/js/94.98caab4d.js"><link rel="prefetch" href="/assets/js/95.13cb4e38.js"><link rel="prefetch" href="/assets/js/96.67628088.js"><link rel="prefetch" href="/assets/js/97.2aea7b50.js"><link rel="prefetch" href="/assets/js/98.a0de40ff.js"><link rel="prefetch" href="/assets/js/99.3562efa4.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.f862dbd1.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.ba24f44a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d20caed7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">朝花夕拾</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Introduction.html" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/FrontEnd/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">前端框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">前端框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://vue3.tanyp.xyz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/Vue/" class="nav-link">
  Vue2
</a></li><li class="dropdown-item"><!----> <a href="/AngularJS/" class="nav-link">
  AngularJS
</a></li></ul></div></div><div class="nav-item"><a href="/JsFrame/" class="nav-link router-link-active">
  技术方案
</a></div><div class="nav-item"><a href="/FrontEndTool/" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="/NodeJS/" class="nav-link">
  NodeJS
</a></div><div class="nav-item"><a href="/TS/" class="nav-link">
  TypeScript
</a></div><div class="nav-item"><a href="/Java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/notes/" class="nav-link">
  Notes
</a></div><div class="nav-item"><a href="/Reading/" class="nav-link">
  Reading
</a></div><div class="nav-item"><a href="/DSA/" class="nav-link">
  数据结构与算法
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Introduction.html" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/FrontEnd/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">前端框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">前端框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://vue3.tanyp.xyz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/Vue/" class="nav-link">
  Vue2
</a></li><li class="dropdown-item"><!----> <a href="/AngularJS/" class="nav-link">
  AngularJS
</a></li></ul></div></div><div class="nav-item"><a href="/JsFrame/" class="nav-link router-link-active">
  技术方案
</a></div><div class="nav-item"><a href="/FrontEndTool/" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="/NodeJS/" class="nav-link">
  NodeJS
</a></div><div class="nav-item"><a href="/TS/" class="nav-link">
  TypeScript
</a></div><div class="nav-item"><a href="/Java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/notes/" class="nav-link">
  Notes
</a></div><div class="nav-item"><a href="/Reading/" class="nav-link">
  Reading
</a></div><div class="nav-item"><a href="/DSA/" class="nav-link">
  数据结构与算法
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/JsFrame/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/JsFrame/vue&amp;react.html" class="sidebar-link">React vs Vue</a></li><li><a href="/JsFrame/microFront.html" class="sidebar-link">微前端</a></li><li><a href="/JsFrame/cross-platform.html" class="sidebar-link">移动端跨平台方案演进</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>性能与监控</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JsFrame/performance/前端性能监控.html" class="sidebar-link">前端性能监控</a></li><li><a href="/JsFrame/performance/错误信息收集.html" class="sidebar-link">错误信息收集</a></li><li><a href="/JsFrame/performance/前端性能优化.html" class="sidebar-link">前端性能优化</a></li><li><a href="/JsFrame/performance/浏览器渲染页面.html" class="sidebar-link">浏览器渲染页面</a></li></ul></section></li><li><a href="/JsFrame/设计一个前端项目.html" class="sidebar-link">设计一个前端项目</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>运维相关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JsFrame/operations/Linux.html" class="sidebar-link">Linux 操作系统</a></li><li><a href="/JsFrame/operations/Docker.html" class="sidebar-link">Docker 基础</a></li><li><a href="/JsFrame/operations/Nginx.html" class="sidebar-link">Nginx</a></li><li><a href="/JsFrame/operations/deployWebApp.html" aria-current="page" class="active sidebar-link">部署一个静态网站</a></li><li><a href="/JsFrame/operations/gitlab.html" class="sidebar-link">gitlab</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="部署一个静态网站"><a href="#部署一个静态网站" class="header-anchor">#</a> 部署一个静态网站</h1> <p>在阿里云 ecs 部署一点前端静态服务器。使用的环境为 linux、nginx、node 以及 pm2。</p> <p></p><div class="table-of-contents"><ul><li><a href="#nginx">nginx</a></li><li><a href="#域名解析">域名解析</a></li><li><a href="#配置-ssl">配置 SSL</a></li><li><a href="#node-服务器">node 服务器</a></li><li><a href="#ssh-免密登录">ssh 免密登录</a></li><li><a href="#pm2-部署">pm2 部署</a></li><li><a href="#http-2">http 2</a></li><li><a href="#部署问过程遇到的问题">部署问过程遇到的问题</a></li></ul></div><p></p> <h2 id="nginx"><a href="#nginx" class="header-anchor">#</a> nginx</h2> <p>linux 下安装</p> <div class="language-sh extra-class"><pre class="language-sh"><code>yum <span class="token parameter variable">-y</span> <span class="token function">install</span> nginx-1.16.1
</code></pre></div><p>相关命令</p> <div class="language-sh extra-class"><pre class="language-sh"><code>nginx <span class="token parameter variable">-v</span>

<span class="token comment"># 启动</span>
nginx

<span class="token comment"># 查看nginx都安装到了哪些目录</span>
<span class="token function">rpm</span> <span class="token parameter variable">-ql</span> nginx

<span class="token comment"># 进入配置文件，不同的部署方式目录不同</span>
<span class="token builtin class-name">cd</span> /etc/nginx/conf.d

<span class="token comment"># 关闭</span>
nginx <span class="token parameter variable">-s</span> stop

<span class="token comment"># 重新启动</span>
nginx <span class="token parameter variable">-s</span> reload

<span class="token comment"># 查询80端口占用</span>
<span class="token function">netstat</span> <span class="token parameter variable">-ntpl</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token number">80</span>

<span class="token comment"># 杀死所有nginx进程</span>
<span class="token function">killall</span> nginx

<span class="token comment"># 查看nginx进程</span>
<span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> nginx

<span class="token comment"># 检查nginx配置</span>
nginx <span class="token parameter variable">-t</span>
</code></pre></div><p>进入<code>/etc/nginx/conf.d</code>目录后</p> <p>新建一个问价夹，创建<code>blog-xxx-com-3000.conf</code>文件，为了方便管理，文件名建议和域名一致。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 创建文件</span>
<span class="token function">touch</span> blog-xxx-com-3000
<span class="token comment"># 打开文件编辑</span>
<span class="token function">vim</span> blog-xxx-com-3000
</code></pre></div><p>在创建好的文件中写入内容。</p> <div class="language-conf extra-class"><pre class="language-text"><code>upstream fe_blog {
  server  127.0.0.1:3000;
}
server {
  listen 80;
  server_name blog.xxx.com;
  return 301 https://$host$request_uri;
}
server {
  #SSL 访问端口号为 443
  listen 443 ssl;
  #填写绑定证书的域名
  server_name blog.xxx.com;
  #证书文件名称 /www/ssl/为证书路劲
  ssl_certificate /www/ssl/1_blog.xxx.com_bundle.crt;
  #私钥文件名称
  ssl_certificate_key /www/ssl/2_blog.xxx.com.key;
  ssl_session_timeout 5m;
  #请按照以下协议配置
  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
  #请按照以下套件配置，配置加密套件，写法遵循 openssl 标准。
  ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;
  ssl_prefer_server_ciphers on;
  location / {
    proxy_pass          http://fe_blog;
    proxy_set_header    host             $host;
    proxy_set_header    X-Real-IP        $remote_addr;
    proxy_set_header    X-Forwarded-For  $proxy_add_x_forwarded_for;
    proxy_set_header    X-NginX-Proxy    true;
  }
}
</code></pre></div><p>写入完成后，按键盘<code>esc</code>退出，按 <code>shift + :</code> 和 <code>wq!</code>保存退出。然后查看配置并检查配置是否有错误。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">cat</span> blog-xxx-com-3000
nginx <span class="token parameter variable">-t</span>
</code></pre></div><p>以上配置将 nginx 作为代理服务器使用，将 3000 端口下的 http 服务反向代理到<code>https://blog.xxx.com</code>域名下。如果将静态直接部署到 nginx 下，使用以下配置：</p> <div class="language-js extra-class"><pre class="language-js"><code>server <span class="token punctuation">{</span>
    listen <span class="token number">80</span><span class="token punctuation">;</span>
    # gzip config
    gzip on<span class="token punctuation">;</span>
    gzip_min_length 1k<span class="token punctuation">;</span>
    gzip_comp_level <span class="token number">9</span><span class="token punctuation">;</span>
    gzip_types text<span class="token operator">/</span>plain application<span class="token operator">/</span>javascript application<span class="token operator">/</span>x<span class="token operator">-</span>javascript text<span class="token operator">/</span>css application<span class="token operator">/</span>xml text<span class="token operator">/</span>javascript application<span class="token operator">/</span>x<span class="token operator">-</span>httpd<span class="token operator">-</span>php image<span class="token operator">/</span>jpeg image<span class="token operator">/</span>gif image<span class="token operator">/</span>png<span class="token punctuation">;</span>
    gzip_vary on<span class="token punctuation">;</span>
    gzip_disable <span class="token string">&quot;MSIE [1-6]\.&quot;</span><span class="token punctuation">;</span>

    root <span class="token operator">/</span>usr<span class="token operator">/</span>share<span class="token operator">/</span>nginx<span class="token operator">/</span>html<span class="token punctuation">;</span>

    location <span class="token operator">/</span> <span class="token punctuation">{</span>
        # 用于配合 browserHistory使用
        try_files $uri $uri<span class="token operator">/</span> <span class="token operator">/</span>index<span class="token punctuation">.</span>html<span class="token punctuation">;</span>

        # 如果有资源，建议使用 https <span class="token operator">+</span> http2，配合按需加载可以获得更好的体验
        # rewrite <span class="token operator">^</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">)</span>$ https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>preview<span class="token punctuation">.</span>pro<span class="token punctuation">.</span>ant<span class="token punctuation">.</span>design<span class="token operator">/</span>$1 permanent<span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
    location <span class="token operator">/</span>api <span class="token punctuation">{</span>
        proxy_pass https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>ant<span class="token operator">-</span>design<span class="token operator">-</span>pro<span class="token punctuation">.</span>netlify<span class="token punctuation">.</span>com<span class="token punctuation">;</span>
        proxy_set_header   <span class="token constant">X</span><span class="token operator">-</span>Forwarded<span class="token operator">-</span>Proto $scheme<span class="token punctuation">;</span>
        proxy_set_header   <span class="token constant">X</span><span class="token operator">-</span>Real<span class="token operator">-</span><span class="token constant">IP</span>         $remote_addr<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

server <span class="token punctuation">{</span>
  # 如果有资源，建议使用 https <span class="token operator">+</span> http2，配合按需加载可以获得更好的体验
  listen <span class="token number">443</span> ssl http2 default_server<span class="token punctuation">;</span>

  # 证书的公私钥
  ssl_certificate <span class="token operator">/</span>path<span class="token operator">/</span>to<span class="token operator">/</span><span class="token keyword">public</span><span class="token punctuation">.</span>crt<span class="token punctuation">;</span>
  ssl_certificate_key <span class="token operator">/</span>path<span class="token operator">/</span>to<span class="token operator">/</span><span class="token keyword">private</span><span class="token punctuation">.</span>key<span class="token punctuation">;</span>

  location <span class="token operator">/</span> <span class="token punctuation">{</span>
        # 用于配合 browserHistory使用
        try_files $uri $uri<span class="token operator">/</span> <span class="token operator">/</span>index<span class="token punctuation">.</span>html<span class="token punctuation">;</span>

  <span class="token punctuation">}</span>
  location <span class="token operator">/</span>api <span class="token punctuation">{</span>
      proxy_pass https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>ant<span class="token operator">-</span>design<span class="token operator">-</span>pro<span class="token punctuation">.</span>netlify<span class="token punctuation">.</span>com<span class="token punctuation">;</span>
      proxy_set_header   <span class="token constant">X</span><span class="token operator">-</span>Forwarded<span class="token operator">-</span>Proto $scheme<span class="token punctuation">;</span>
      proxy_set_header   Host              $http_host<span class="token punctuation">;</span>
      proxy_set_header   <span class="token constant">X</span><span class="token operator">-</span>Real<span class="token operator">-</span><span class="token constant">IP</span>         $remote_addr<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以上是<a href="https://pro.ant.design/zh-CN/docs/deploy/" target="_blank" rel="noopener noreferrer">ant design pro 的部署<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="域名解析"><a href="#域名解析" class="header-anchor">#</a> 域名解析</h2> <p>购买域名，配置 dns 服务器地址。如果购买平台和解析平台不是一个平台，需要设置 dns 服务器。</p> <p>个人一般在<a href="https://www.dnspod.cn/" target="_blank" rel="noopener noreferrer">dnspod<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>上做域名解析。</p> <div class="language-text extra-class"><pre class="language-text"><code>algernon.dnspod.net
cassiopeia.dnspod.net
</code></pre></div><p>添加记录</p> <p><img src="/assets/img/deployWebApp001.f0412241.png" alt="添加记录"></p> <h2 id="配置-ssl"><a href="#配置-ssl" class="header-anchor">#</a> 配置 SSL</h2> <p>nginx 中配置 https 时，需要配置 <code>ssl_certificate</code> 和 <code>ssl_certificate_key</code> 字段，这个两个字段是 SSL 的两个证书。SSL 证书在域名解析时需要单独购买。对于个人网站可以使用免费的 SSL 证，域名解析时按提示配置 SSL 证书。配置后在证书管理页面下载 ssl 证书即可，里面有 <code>Apache</code>、<code>IIS</code>、<code>Nginx</code>、<code>Tomcat</code> 等服务器配置时需要的证书。</p> <p><img src="/assets/img/deployWebApp002.5797f0f5.jpg" alt="ssl证书"></p> <p>下载证书后，需要将证书上传到固定 nginx 中固定的目录下。个人一般存放在自建的<code>www/ssl</code>目录下。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 给nginx目录下上传文件</span>
<span class="token function">scp</span> 1_blog.xxx.com_bundle.crt root@xx.xx.xx.xxx:/www/ssl/
<span class="token function">scp</span> 2_blog.xxx.com.key root@xx.xx.xx.xxx:/www/ssl/
</code></pre></div><h2 id="node-服务器"><a href="#node-服务器" class="header-anchor">#</a> node 服务器</h2> <p>Linux 上安装 node，先安装<a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener noreferrer">nvm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js extra-class"><pre class="language-js"><code>curl <span class="token operator">-</span>o<span class="token operator">-</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>raw<span class="token punctuation">.</span>githubusercontent<span class="token punctuation">.</span>com<span class="token operator">/</span>nvm<span class="token operator">-</span>sh<span class="token operator">/</span>nvm<span class="token operator">/</span>v0<span class="token punctuation">.</span><span class="token number">39.0</span><span class="token operator">/</span>install<span class="token punctuation">.</span>sh <span class="token operator">|</span> bash
wget <span class="token operator">-</span>qO<span class="token operator">-</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>raw<span class="token punctuation">.</span>githubusercontent<span class="token punctuation">.</span>com<span class="token operator">/</span>nvm<span class="token operator">-</span>sh<span class="token operator">/</span>nvm<span class="token operator">/</span>v0<span class="token punctuation">.</span><span class="token number">39.0</span><span class="token operator">/</span>install<span class="token punctuation">.</span>sh <span class="token operator">|</span> bash
</code></pre></div><p>静态网站服务器可以使用：<code>pushstate-server</code>,新建 <code>server.js</code> 文件夹。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'pushstate-server'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">3001</span><span class="token punctuation">,</span>
  <span class="token literal-property property">directory</span><span class="token operator">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>也可以使用<code>express</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> compression <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'compression'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 端口可以自己定义</span>
<span class="token keyword">const</span> port <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">3002</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 开启 gzip 压缩</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">compression</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Listening at '</span> <span class="token operator">+</span> port <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>接下来配置 pm2 自动化部署，首先配置 ssh 远程服务器免密登录。</p> <h2 id="ssh-免密登录"><a href="#ssh-免密登录" class="header-anchor">#</a> ssh 免密登录</h2> <blockquote><p>SSH 是一种网络协议，用于计算机之间的加密登录。</p></blockquote> <p>查看本地 <code>~/.ssh</code> 路径下是否有 ssh key，没有则生成 ssh key。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>ssh-keygen <span class="token parameter variable">-t</span> rsa <span class="token parameter variable">-C</span> <span class="token string">&quot;xxxxx@xxxxx.com&quot;</span>
<span class="token function">cat</span> id_rsa.pub
</code></pre></div><p><code>id_rsa.pub</code> 文件里面的内容，就是需要的公钥内容。</p> <p>拿到它之后，进入阿里云服务器，同样先看看本地是否有设置好公钥，如果没有，按刚才的步骤再配置一次。</p> <p><img src="data:image/png;base64,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" alt="ssh"></p> <p>配置完成后，把之前用户本地生成的 <code>id_rsa.pub</code> 内容放入 <code>authorized_keys</code> 中，在本地命令行工具执行 <code>ssh root@服务器 IP</code>，便能直接免密登录了。</p> <h2 id="pm2-部署"><a href="#pm2-部署" class="header-anchor">#</a> pm2 部署</h2> <p>部署流程图</p> <p><img src="/assets/img/deployWebApp003.ce67899d.png" alt="部署流程图"></p> <p>使用 ssh 免密登录远程服务器。</p> <p>在根目录下新建文件<code>ecosystem.config.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">apps</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'blog'</span><span class="token punctuation">,</span> <span class="token comment">// 项目名</span>
      <span class="token literal-property property">script</span><span class="token operator">:</span> <span class="token string">'server.js'</span><span class="token punctuation">,</span> <span class="token comment">// 上文创建的node服务器</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">deploy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">production</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span> <span class="token comment">// 阿里云用户名</span>
      <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'47.97.10.000'</span><span class="token punctuation">,</span> <span class="token comment">// 阿里云地址</span>
      <span class="token literal-property property">ref</span><span class="token operator">:</span> <span class="token string">'origin/master'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">repo</span><span class="token operator">:</span> <span class="token string">'git@github.com:xxxx/xxxxx.git'</span><span class="token punctuation">,</span> <span class="token comment">// git仓库地址</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/www/website/blog'</span><span class="token punctuation">,</span> <span class="token comment">// 阿里云上的路径 www 是个人新建的路径</span>
      <span class="token literal-property property">ssh_options</span><span class="token operator">:</span> <span class="token string">'StrictHostKeyChecking=no'</span><span class="token punctuation">,</span>
      <span class="token string-property property">'post-deploy'</span><span class="token operator">:</span>
        <span class="token string">'git reset --hard &amp;&amp; git checkout master &amp;&amp; git pull &amp;&amp; npm i --production=false &amp;&amp; npm run build &amp;&amp; pm2 startOrReload ecosystem.config.js'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">NODE_ENV</span><span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>由于服务器并没有 blog 这个项目，所以我们需要初始化一下项目</p> <div class="language-sh extra-class"><pre class="language-sh"><code>pm2 deploy ecosystem.config.js production setup
</code></pre></div><p>当服务器上有该路径地址后，开始自动化执行整个流程。每次本地使用以下命令即可完成自动化部署。</p> <div class="language-js extra-class"><pre class="language-js"><code>pm2 deploy production
</code></pre></div><p>部署成功后：</p> <p><img src="/assets/img/deployWebApp005.f2de8a08.png" alt="pm2"></p> <p><a href="https://pm2.keymetrics.io/docs/usage/quick-start/" target="_blank" rel="noopener noreferrer">pm2 文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="http-2"><a href="#http-2" class="header-anchor">#</a> http 2</h2> <h2 id="部署问过程遇到的问题"><a href="#部署问过程遇到的问题" class="header-anchor">#</a> 部署问过程遇到的问题</h2> <p>重启 nginx 之后，访问 ip 地址首页，有 403 错误，可以在安全组添加对应的端口。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/JsFrame/operations/Nginx.html" class="prev">
        Nginx
      </a></span> <span class="next"><a href="/JsFrame/operations/gitlab.html">
        gitlab
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.28371f0c.js" defer></script><script src="/assets/js/53.72aa59c3.js" defer></script><script src="/assets/js/2.e0269be8.js" defer></script><script src="/assets/js/1.c44a8a87.js" defer></script><script src="/assets/js/18.1615bcb9.js" defer></script>
  </body>
</html>
